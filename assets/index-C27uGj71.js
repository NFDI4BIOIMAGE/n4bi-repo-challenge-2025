const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Tr=Object.defineProperty;var ui=t=>{throw TypeError(t)};var Or=(t,e,n)=>e in t?Tr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oe=(t,e,n)=>Or(t,typeof e!="symbol"?e+"":e,n),En=(t,e,n)=>e.has(t)||ui("Cannot "+n);var ee=(t,e,n)=>(En(t,e,"read from private field"),n?n.call(t):e.get(t)),Te=(t,e,n)=>e.has(t)?ui("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,i)=>(En(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),In=(t,e,n)=>(En(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ke(){}function zr(t,e){for(const n in e)t[n]=e[n];return t}function ur(t){return t()}function ci(){return Object.create(null)}function et(t){t.forEach(ur)}function _n(t){return typeof t=="function"}function Ue(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let an;function Sn(t,e){return t===e?!0:(an||(an=document.createElement("a")),an.href=e,t===an.href)}function Rr(t){return Object.keys(t).length===0}function Mr(t,...e){if(t==null){for(const i of e)i(void 0);return ke}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Nt(t){let e;return Mr(t,n=>e=n)(),e}function Tn(t,e,n,i){if(t){const r=cr(t,e,n,i);return t[0](r)}}function cr(t,e,n,i){return t[1]&&i?zr(n.ctx.slice(),t[1](i(e))):n.ctx}function On(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function zn(t,e,n,i,r,s){if(r){const o=cr(e,n,i,s);t.p(o,r)}}function Rn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function fi(t){return t??""}function d(t,e){t.appendChild(e)}function x(t,e,n){t.insertBefore(e,n||null)}function q(t){t.parentNode&&t.parentNode.removeChild(t)}function It(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function B(t){return document.createTextNode(t)}function G(){return B(" ")}function bn(){return B("")}function we(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Lr(t){return Array.from(t.childNodes)}function me(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ie(t,e){t.value=e??""}function ae(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function ot(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function un(t){const e=t.querySelector(":checked");return e&&e.__value}function Et(t,e,n){t.classList.toggle(e,!!n)}function Fr(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let Ut;function Bt(t){Ut=t}function qn(){if(!Ut)throw new Error("Function called outside component initialization");return Ut}function $t(t){qn().$$.on_mount.push(t)}function xn(t){qn().$$.on_destroy.push(t)}function Dr(){const t=qn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=Fr(e,n,{cancelable:i});return r.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const kt=[],Tt=[];let Ct=[];const hi=[],Nr=Promise.resolve();let Mn=!1;function Pr(){Mn||(Mn=!0,Nr.then(De))}function st(t){Ct.push(t)}const Cn=new Set;let wt=0;function De(){if(wt!==0)return;const t=Ut;do{try{for(;wt<kt.length;){const e=kt[wt];wt++,Bt(e),Br(e.$$)}}catch(e){throw kt.length=0,wt=0,e}for(Bt(null),kt.length=0,wt=0;Tt.length;)Tt.pop()();for(let e=0;e<Ct.length;e+=1){const n=Ct[e];Cn.has(n)||(Cn.add(n),n())}Ct.length=0}while(kt.length);for(;hi.length;)hi.pop()();Mn=!1,Cn.clear(),Bt(t)}function Br(t){if(t.fragment!==null){t.update(),et(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(st)}}function Ur(t){const e=[],n=[];Ct.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Ct=e}const fn=new Set;let _t;function Ot(){_t={r:0,c:[],p:_t}}function zt(){_t.r||et(_t.c),_t=_t.p}function re(t,e){t&&t.i&&(fn.delete(t),t.i(e))}function he(t,e,n,i){if(t&&t.o){if(fn.has(t))return;fn.add(t),_t.c.push(()=>{fn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Ne(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function jr(t,e){t.d(1),e.delete(t.key)}function qr(t,e){he(t,1,1,()=>{e.delete(t.key)})}function fr(t,e,n,i,r,s,o,a,l,h,u,g){let m=t.length,p=s.length,_=m;const E={};for(;_--;)E[t[_].key]=_;const N=[],z=new Map,L=new Map,Y=[];for(_=p;_--;){const S=g(r,s,_),f=n(S);let c=o.get(f);c?Y.push(()=>c.p(S,e)):(c=h(f,S),c.c()),z.set(f,N[_]=c),f in E&&L.set(f,Math.abs(_-E[f]))}const H=new Set,X=new Set;function J(S){re(S,1),S.m(a,u),o.set(S.key,S),u=S.first,p--}for(;m&&p;){const S=N[p-1],f=t[m-1],c=S.key,k=f.key;S===f?(u=S.first,m--,p--):z.has(k)?!o.has(c)||H.has(c)?J(S):X.has(k)?m--:L.get(c)>L.get(k)?(X.add(c),J(S)):(H.add(k),m--):(l(f,o),m--)}for(;m--;){const S=t[m];z.has(S.key)||l(S,o)}for(;p;)J(N[p-1]);return et(Y),N}function Ke(t){t&&t.c()}function Ve(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),st(()=>{const s=t.$$.on_mount.map(ur).filter(_n);t.$$.on_destroy?t.$$.on_destroy.push(...s):et(s),t.$$.on_mount=[]}),r.forEach(st)}function We(t,e){const n=t.$$;n.fragment!==null&&(Ur(n.after_update),et(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function xr(t,e){t.$$.dirty[0]===-1&&(kt.push(t),Pr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Je(t,e,n,i,r,s,o=null,a=[-1]){const l=Ut;Bt(t);const h=t.$$={fragment:null,ctx:[],props:s,update:ke,not_equal:r,bound:ci(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ci(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(h.root);let u=!1;if(h.ctx=n?n(t,e.props||{},(g,m,...p)=>{const _=p.length?p[0]:m;return h.ctx&&r(h.ctx[g],h.ctx[g]=_)&&(!h.skip_bound&&h.bound[g]&&h.bound[g](_),u&&xr(t,g)),m}):[],h.update(),u=!0,et(h.before_update),h.fragment=i?i(h.ctx):!1,e.target){if(e.hydrate){const g=Lr(e.target);h.fragment&&h.fragment.l(g),g.forEach(q)}else h.fragment&&h.fragment.c();e.intro&&re(t.$$.fragment),Ve(t,e.target,e.anchor),De()}Bt(l)}class Ze{constructor(){oe(this,"$$");oe(this,"$$set")}$destroy(){We(this,1),this.$destroy=ke}$on(e,n){if(!_n(n))return ke;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Rr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Gr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Gr);const yt=[];function Ln(t,e=ke){let n;const i=new Set;function r(a){if(Ue(t,a)&&(t=a,n)){const l=!yt.length;for(const h of i)h[1](),yt.push(h,t);if(l){for(let h=0;h<yt.length;h+=2)yt[h][0](yt[h+1]);yt.length=0}}}function s(a){r(a(t))}function o(a,l=ke){const h=[a,l];return i.add(h),i.size===1&&(n=e(r,s)||ke),a(t),()=>{i.delete(h),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}var Vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,i){t.exports=i()})(Vr,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,o={},a=0,l={parse:function(f,c){var k=(c=c||{}).dynamicTyping||!1;if(S(k)&&(c.dynamicTypingFunction=k,k={}),c.dynamicTyping=k,c.transform=!!S(c.transform)&&c.transform,c.worker&&l.WORKERS_SUPPORTED){var O=function(){if(!l.WORKERS_SUPPORTED)return!1;var M=(Q=i.URL||i.webkitURL||null,U=n.toString(),l.BLOB_URL||(l.BLOB_URL=Q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",U,")();"],{type:"text/javascript"})))),j=new i.Worker(M),Q,U;return j.onmessage=L,j.id=a++,o[j.id]=j}();return O.userStep=c.step,O.userChunk=c.chunk,O.userComplete=c.complete,O.userError=c.error,c.step=S(c.step),c.chunk=S(c.chunk),c.complete=S(c.complete),c.error=S(c.error),delete c.worker,void O.postMessage({input:f,config:c,workerId:O.id})}var T=null;return l.NODE_STREAM_INPUT,typeof f=="string"?(f=function(M){return M.charCodeAt(0)===65279?M.slice(1):M}(f),T=c.download?new g(c):new p(c)):f.readable===!0&&S(f.read)&&S(f.on)?T=new _(c):(i.File&&f instanceof File||f instanceof Object)&&(T=new m(c)),T.stream(f)},unparse:function(f,c){var k=!1,O=!0,T=",",M=`\r
`,j='"',Q=j+j,U=!1,w=null,C=!1;(function(){if(typeof c=="object"){if(typeof c.delimiter!="string"||l.BAD_DELIMITERS.filter(function(A){return c.delimiter.indexOf(A)!==-1}).length||(T=c.delimiter),(typeof c.quotes=="boolean"||typeof c.quotes=="function"||Array.isArray(c.quotes))&&(k=c.quotes),typeof c.skipEmptyLines!="boolean"&&typeof c.skipEmptyLines!="string"||(U=c.skipEmptyLines),typeof c.newline=="string"&&(M=c.newline),typeof c.quoteChar=="string"&&(j=c.quoteChar),typeof c.header=="boolean"&&(O=c.header),Array.isArray(c.columns)){if(c.columns.length===0)throw new Error("Option columns is empty");w=c.columns}c.escapeChar!==void 0&&(Q=c.escapeChar+j),(typeof c.escapeFormulae=="boolean"||c.escapeFormulae instanceof RegExp)&&(C=c.escapeFormulae instanceof RegExp?c.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var R=new RegExp(N(j),"g");if(typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(f)){if(!f.length||Array.isArray(f[0]))return F(null,f,U);if(typeof f[0]=="object")return F(w||Object.keys(f[0]),f,U)}else if(typeof f=="object")return typeof f.data=="string"&&(f.data=JSON.parse(f.data)),Array.isArray(f.data)&&(f.fields||(f.fields=f.meta&&f.meta.fields||w),f.fields||(f.fields=Array.isArray(f.data[0])?f.fields:typeof f.data[0]=="object"?Object.keys(f.data[0]):[]),Array.isArray(f.data[0])||typeof f.data[0]=="object"||(f.data=[f.data])),F(f.fields||[],f.data||[],U);throw new Error("Unable to serialize unrecognized input");function F(A,V,v){var D="";typeof A=="string"&&(A=JSON.parse(A)),typeof V=="string"&&(V=JSON.parse(V));var W=Array.isArray(A)&&0<A.length,ne=!Array.isArray(V[0]);if(W&&O){for(var ie=0;ie<A.length;ie++)0<ie&&(D+=T),D+=te(A[ie],ie);0<V.length&&(D+=M)}for(var P=0;P<V.length;P++){var Z=W?A.length:V[P].length,ue=!1,de=W?Object.keys(V[P]).length===0:V[P].length===0;if(v&&!W&&(ue=v==="greedy"?V[P].join("").trim()==="":V[P].length===1&&V[P][0].length===0),v==="greedy"&&W){for(var $=[],pe=0;pe<Z;pe++){var _e=ne?A[pe]:pe;$.push(V[P][_e])}ue=$.join("").trim()===""}if(!ue){for(var ce=0;ce<Z;ce++){0<ce&&!de&&(D+=T);var Pe=W&&ne?A[ce]:ce;D+=te(V[P][Pe],ce)}P<V.length-1&&(!v||0<Z&&!de)&&(D+=M)}}return D}function te(A,V){if(A==null)return"";if(A.constructor===Date)return JSON.stringify(A).slice(1,25);var v=!1;C&&typeof A=="string"&&C.test(A)&&(A="'"+A,v=!0);var D=A.toString().replace(R,Q);return(v=v||k===!0||typeof k=="function"&&k(A,V)||Array.isArray(k)&&k[V]||function(W,ne){for(var ie=0;ie<ne.length;ie++)if(-1<W.indexOf(ne[ie]))return!0;return!1}(D,l.BAD_DELIMITERS)||-1<D.indexOf(T)||D.charAt(0)===" "||D.charAt(D.length-1)===" ")?j+D+j:D}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!r&&!!i.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=z,l.ParserHandle=E,l.NetworkStreamer=g,l.FileStreamer=m,l.StringStreamer=p,l.ReadableStreamStreamer=_,i.jQuery){var h=i.jQuery;h.fn.parse=function(f){var c=f.config||{},k=[];return this.each(function(M){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var j=0;j<this.files.length;j++)k.push({file:this.files[j],inputElem:this,instanceConfig:h.extend({},c)})}),O(),this;function O(){if(k.length!==0){var M,j,Q,U,w=k[0];if(S(f.before)){var C=f.before(w.file,w.inputElem);if(typeof C=="object"){if(C.action==="abort")return M="AbortError",j=w.file,Q=w.inputElem,U=C.reason,void(S(f.error)&&f.error({name:M},j,Q,U));if(C.action==="skip")return void T();typeof C.config=="object"&&(w.instanceConfig=h.extend(w.instanceConfig,C.config))}else if(C==="skip")return void T()}var R=w.instanceConfig.complete;w.instanceConfig.complete=function(F){S(R)&&R(F,w.file,w.inputElem),T()},l.parse(w.file,w.instanceConfig)}else S(f.complete)&&f.complete()}function T(){k.splice(0,1),O()}}}function u(f){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(c){var k=X(c);k.chunkSize=parseInt(k.chunkSize),c.step||c.chunk||(k.chunkSize=null),this._handle=new E(k),(this._handle.streamer=this)._config=k}).call(this,f),this.parseChunk=function(c,k){if(this.isFirstChunk&&S(this._config.beforeFirstChunk)){var O=this._config.beforeFirstChunk(c);O!==void 0&&(c=O)}this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+c;this._partialLine="";var M=this._handle.parse(T,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var j=M.meta.cursor;this._finished||(this._partialLine=T.substring(j-this._baseIndex),this._baseIndex=j),M&&M.data&&(this._rowCount+=M.data.length);var Q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:M,workerId:l.WORKER_ID,finished:Q});else if(S(this._config.chunk)&&!k){if(this._config.chunk(M,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);M=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(M.data),this._completeResults.errors=this._completeResults.errors.concat(M.errors),this._completeResults.meta=M.meta),this._completed||!Q||!S(this._config.complete)||M&&M.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Q||M&&M.meta.paused||this._nextChunk(),M}this._halted=!0},this._sendError=function(c){S(this._config.error)?this._config.error(c):s&&this._config.error&&i.postMessage({workerId:l.WORKER_ID,error:c,finished:!1})}}function g(f){var c;(f=f||{}).chunkSize||(f.chunkSize=l.RemoteChunkSize),u.call(this,f),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(k){this._input=k,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(c=new XMLHttpRequest,this._config.withCredentials&&(c.withCredentials=this._config.withCredentials),r||(c.onload=J(this._chunkLoaded,this),c.onerror=J(this._chunkError,this)),c.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var k=this._config.downloadRequestHeaders;for(var O in k)c.setRequestHeader(O,k[O])}if(this._config.chunkSize){var T=this._start+this._config.chunkSize-1;c.setRequestHeader("Range","bytes="+this._start+"-"+T)}try{c.send(this._config.downloadRequestBody)}catch(M){this._chunkError(M.message)}r&&c.status===0&&this._chunkError()}},this._chunkLoaded=function(){c.readyState===4&&(c.status<200||400<=c.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:c.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(k){var O=k.getResponseHeader("Content-Range");return O===null?-1:parseInt(O.substring(O.lastIndexOf("/")+1))}(c),this.parseChunk(c.responseText)))},this._chunkError=function(k){var O=c.statusText||k;this._sendError(new Error(O))}}function m(f){var c,k;(f=f||{}).chunkSize||(f.chunkSize=l.LocalChunkSize),u.call(this,f);var O=typeof FileReader<"u";this.stream=function(T){this._input=T,k=T.slice||T.webkitSlice||T.mozSlice,O?((c=new FileReader).onload=J(this._chunkLoaded,this),c.onerror=J(this._chunkError,this)):c=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var T=this._input;if(this._config.chunkSize){var M=Math.min(this._start+this._config.chunkSize,this._input.size);T=k.call(T,this._start,M)}var j=c.readAsText(T,this._config.encoding);O||this._chunkLoaded({target:{result:j}})},this._chunkLoaded=function(T){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(T.target.result)},this._chunkError=function(){this._sendError(c.error)}}function p(f){var c;u.call(this,f=f||{}),this.stream=function(k){return c=k,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var k,O=this._config.chunkSize;return O?(k=c.substring(0,O),c=c.substring(O)):(k=c,c=""),this._finished=!c,this.parseChunk(k)}}}function _(f){u.call(this,f=f||{});var c=[],k=!0,O=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(T){this._input=T,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){O&&c.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),c.length?this.parseChunk(c.shift()):k=!0},this._streamData=J(function(T){try{c.push(typeof T=="string"?T:T.toString(this._config.encoding)),k&&(k=!1,this._checkIsFinished(),this.parseChunk(c.shift()))}catch(M){this._streamError(M)}},this),this._streamError=J(function(T){this._streamCleanUp(),this._sendError(T)},this),this._streamEnd=J(function(){this._streamCleanUp(),O=!0,this._streamData("")},this),this._streamCleanUp=J(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function E(f){var c,k,O,T=Math.pow(2,53),M=-T,j=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,U=this,w=0,C=0,R=!1,F=!1,te=[],A={data:[],errors:[],meta:{}};if(S(f.step)){var V=f.step;f.step=function(P){if(A=P,W())D();else{if(D(),A.data.length===0)return;w+=P.data.length,f.preview&&w>f.preview?k.abort():(A.data=A.data[0],V(A,U))}}}function v(P){return f.skipEmptyLines==="greedy"?P.join("").trim()==="":P.length===1&&P[0].length===0}function D(){return A&&O&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),O=!1),f.skipEmptyLines&&(A.data=A.data.filter(function(P){return!v(P)})),W()&&function(){if(!A)return;function P(ue,de){S(f.transformHeader)&&(ue=f.transformHeader(ue,de)),te.push(ue)}if(Array.isArray(A.data[0])){for(var Z=0;W()&&Z<A.data.length;Z++)A.data[Z].forEach(P);A.data.splice(0,1)}else A.data.forEach(P)}(),function(){if(!A||!f.header&&!f.dynamicTyping&&!f.transform)return A;function P(ue,de){var $,pe=f.header?{}:[];for($=0;$<ue.length;$++){var _e=$,ce=ue[$];f.header&&(_e=$>=te.length?"__parsed_extra":te[$]),f.transform&&(ce=f.transform(ce,_e)),ce=ne(_e,ce),_e==="__parsed_extra"?(pe[_e]=pe[_e]||[],pe[_e].push(ce)):pe[_e]=ce}return f.header&&($>te.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+te.length+" fields but parsed "+$,C+de):$<te.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+te.length+" fields but parsed "+$,C+de)),pe}var Z=1;return!A.data.length||Array.isArray(A.data[0])?(A.data=A.data.map(P),Z=A.data.length):A.data=P(A.data,0),f.header&&A.meta&&(A.meta.fields=te),C+=Z,A}()}function W(){return f.header&&te.length===0}function ne(P,Z){return ue=P,f.dynamicTypingFunction&&f.dynamicTyping[ue]===void 0&&(f.dynamicTyping[ue]=f.dynamicTypingFunction(ue)),(f.dynamicTyping[ue]||f.dynamicTyping)===!0?Z==="true"||Z==="TRUE"||Z!=="false"&&Z!=="FALSE"&&(function(de){if(j.test(de)){var $=parseFloat(de);if(M<$&&$<T)return!0}return!1}(Z)?parseFloat(Z):Q.test(Z)?new Date(Z):Z===""?null:Z):Z;var ue}function ie(P,Z,ue,de){var $={type:P,code:Z,message:ue};de!==void 0&&($.row=de),A.errors.push($)}this.parse=function(P,Z,ue){var de=f.quoteChar||'"';if(f.newline||(f.newline=function(_e,ce){_e=_e.substring(0,1048576);var Pe=new RegExp(N(ce)+"([^]*?)"+N(ce),"gm"),be=(_e=_e.replace(Pe,"")).split("\r"),je=_e.split(`
`),He=1<je.length&&je[0].length<be[0].length;if(be.length===1||He)return`
`;for(var Oe=0,se=0;se<be.length;se++)be[se][0]===`
`&&Oe++;return Oe>=be.length/2?`\r
`:"\r"}(P,de)),O=!1,f.delimiter)S(f.delimiter)&&(f.delimiter=f.delimiter(P),A.meta.delimiter=f.delimiter);else{var $=function(_e,ce,Pe,be,je){var He,Oe,se,ve;je=je||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Ye=0;Ye<je.length;Ye++){var le=je[Ye],tt=0,qe=0,Qe=0;se=void 0;for(var Re=new z({comments:be,delimiter:le,newline:ce,preview:10}).parse(_e),Ce=0;Ce<Re.data.length;Ce++)if(Pe&&v(Re.data[Ce]))Qe++;else{var Me=Re.data[Ce].length;qe+=Me,se!==void 0?0<Me&&(tt+=Math.abs(Me-se),se=Me):se=Me}0<Re.data.length&&(qe/=Re.data.length-Qe),(Oe===void 0||tt<=Oe)&&(ve===void 0||ve<qe)&&1.99<qe&&(Oe=tt,He=le,ve=qe)}return{successful:!!(f.delimiter=He),bestDelimiter:He}}(P,f.newline,f.skipEmptyLines,f.comments,f.delimitersToGuess);$.successful?f.delimiter=$.bestDelimiter:(O=!0,f.delimiter=l.DefaultDelimiter),A.meta.delimiter=f.delimiter}var pe=X(f);return f.preview&&f.header&&pe.preview++,c=P,k=new z(pe),A=k.parse(c,Z,ue),D(),R?{meta:{paused:!0}}:A||{meta:{paused:!1}}},this.paused=function(){return R},this.pause=function(){R=!0,k.abort(),c=S(f.chunk)?"":c.substring(k.getCharIndex())},this.resume=function(){U.streamer._halted?(R=!1,U.streamer.parseChunk(c,!0)):setTimeout(U.resume,3)},this.aborted=function(){return F},this.abort=function(){F=!0,k.abort(),A.meta.aborted=!0,S(f.complete)&&f.complete(A),c=""}}function N(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function z(f){var c,k=(f=f||{}).delimiter,O=f.newline,T=f.comments,M=f.step,j=f.preview,Q=f.fastMode,U=c=f.quoteChar===void 0||f.quoteChar===null?'"':f.quoteChar;if(f.escapeChar!==void 0&&(U=f.escapeChar),(typeof k!="string"||-1<l.BAD_DELIMITERS.indexOf(k))&&(k=","),T===k)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<l.BAD_DELIMITERS.indexOf(T))&&(T=!1),O!==`
`&&O!=="\r"&&O!==`\r
`&&(O=`
`);var w=0,C=!1;this.parse=function(R,F,te){if(typeof R!="string")throw new Error("Input must be a string");var A=R.length,V=k.length,v=O.length,D=T.length,W=S(M),ne=[],ie=[],P=[],Z=w=0;if(!R)return Le();if(f.header&&!F){var ue=R.split(O)[0].split(k),de=[],$={},pe=!1;for(var _e in ue){var ce=ue[_e];S(f.transformHeader)&&(ce=f.transformHeader(ce,_e));var Pe=ce,be=$[ce]||0;for(0<be&&(pe=!0,Pe=ce+"_"+be),$[ce]=be+1;de.includes(Pe);)Pe=Pe+"_"+be;de.push(Pe)}if(pe){var je=R.split(O);je[0]=de.join(k),R=je.join(O)}}if(Q||Q!==!1&&R.indexOf(c)===-1){for(var He=R.split(O),Oe=0;Oe<He.length;Oe++){if(P=He[Oe],w+=P.length,Oe!==He.length-1)w+=O.length;else if(te)return Le();if(!T||P.substring(0,D)!==T){if(W){if(ne=[],Qe(P.split(k)),ct(),C)return Le()}else Qe(P.split(k));if(j&&j<=Oe)return ne=ne.slice(0,j),Le(!0)}}return Le()}for(var se=R.indexOf(k,w),ve=R.indexOf(O,w),Ye=new RegExp(N(U)+N(c),"g"),le=R.indexOf(c,w);;)if(R[w]!==c)if(T&&P.length===0&&R.substring(w,w+D)===T){if(ve===-1)return Le();w=ve+v,ve=R.indexOf(O,w),se=R.indexOf(k,w)}else if(se!==-1&&(se<ve||ve===-1))P.push(R.substring(w,se)),w=se+V,se=R.indexOf(k,w);else{if(ve===-1)break;if(P.push(R.substring(w,ve)),Me(ve+v),W&&(ct(),C))return Le();if(j&&ne.length>=j)return Le(!0)}else for(le=w,w++;;){if((le=R.indexOf(c,le+1))===-1)return te||ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ne.length,index:w}),Ce();if(le===A-1)return Ce(R.substring(w,le).replace(Ye,c));if(c!==U||R[le+1]!==U){if(c===U||le===0||R[le-1]!==U){se!==-1&&se<le+1&&(se=R.indexOf(k,le+1)),ve!==-1&&ve<le+1&&(ve=R.indexOf(O,le+1));var tt=Re(ve===-1?se:Math.min(se,ve));if(R.substr(le+1+tt,V)===k){P.push(R.substring(w,le).replace(Ye,c)),R[w=le+1+tt+V]!==c&&(le=R.indexOf(c,w)),se=R.indexOf(k,w),ve=R.indexOf(O,w);break}var qe=Re(ve);if(R.substring(le+1+qe,le+1+qe+v)===O){if(P.push(R.substring(w,le).replace(Ye,c)),Me(le+1+qe+v),se=R.indexOf(k,w),le=R.indexOf(c,w),W&&(ct(),C))return Le();if(j&&ne.length>=j)return Le(!0);break}ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ne.length,index:w}),le++}}else le++}return Ce();function Qe(Se){ne.push(Se),Z=w}function Re(Se){var nt=0;if(Se!==-1){var Xe=R.substring(le+1,Se);Xe&&Xe.trim()===""&&(nt=Xe.length)}return nt}function Ce(Se){return te||(Se===void 0&&(Se=R.substring(w)),P.push(Se),w=A,Qe(P),W&&ct()),Le()}function Me(Se){w=Se,Qe(P),P=[],ve=R.indexOf(O,w)}function Le(Se){return{data:ne,errors:ie,meta:{delimiter:k,linebreak:O,aborted:C,truncated:!!Se,cursor:Z+(F||0)}}}function ct(){M(Le()),ne=[],ie=[]}},this.abort=function(){C=!0},this.getCharIndex=function(){return w}}function L(f){var c=f.data,k=o[c.workerId],O=!1;if(c.error)k.userError(c.error,c.file);else if(c.results&&c.results.data){var T={abort:function(){O=!0,Y(c.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:H,resume:H};if(S(k.userStep)){for(var M=0;M<c.results.data.length&&(k.userStep({data:c.results.data[M],errors:c.results.errors,meta:c.results.meta},T),!O);M++);delete c.results}else S(k.userChunk)&&(k.userChunk(c.results,T,c.file),delete c.results)}c.finished&&!O&&Y(c.workerId,c.results)}function Y(f,c){var k=o[f];S(k.userComplete)&&k.userComplete(c),k.terminate(),delete o[f]}function H(){throw new Error("Not implemented.")}function X(f){if(typeof f!="object"||f===null)return f;var c=Array.isArray(f)?[]:{};for(var k in f)c[k]=X(f[k]);return c}function J(f,c){return function(){f.apply(c,arguments)}}function S(f){return typeof f=="function"}return s&&(i.onmessage=function(f){var c=f.data;if(l.WORKER_ID===void 0&&c&&(l.WORKER_ID=c.workerId),typeof c.input=="string")i.postMessage({workerId:l.WORKER_ID,results:l.parse(c.input,c.config),finished:!0});else if(i.File&&c.input instanceof File||c.input instanceof Object){var k=l.parse(c.input,c.config);k&&i.postMessage({workerId:l.WORKER_ID,results:k,finished:!0})}}),(g.prototype=Object.create(u.prototype)).constructor=g,(m.prototype=Object.create(u.prototype)).constructor=m,(p.prototype=Object.create(p.prototype)).constructor=p,(_.prototype=Object.create(u.prototype)).constructor=_,l})})(hr);var Hr=hr.exports;const Kr=Wr(Hr),Jr="https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/idr-mark.svg",Zr="https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",Yr="https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/ssbd-logo.png",gn="https://raw.githubusercontent.com/ome/ome2024-ngff-challenge/main/samples/ngff_samples.csv";let Qr={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://webknossos.org",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function di(t){if(t==="IDR")return Jr;if(t==="SSBD")return Yr;let e=Qr[t];return e?e==="https://nfdi4bioimage.de/"?Zr:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function dr(t,e,n={}){Kr.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(i){let r=["url"],s=i.data[0];s.length>1&&(r=s,i.data.shift());let o=i.data.map(p=>{let _={...n};for(let E=0;E<r.length;E++)_[r[E]]=p[E];return _}),a=o.filter(p=>{var _;return!((_=p.url)!=null&&_.endsWith(".csv"))}),l={};a.forEach(p=>{if(l[p.url]){console.warn("Removing duplicate URL:",p.url);return}l[p.url]=p}),a=Object.values(l);let h=o.filter(p=>{var _;return(_=p.url)==null?void 0:_.includes(".csv")}),u=a.reduce((p,_)=>_.wells?p+1:p,0),g=a.reduce((p,_)=>p+parseInt(_.written||0),0),m=a.length;u>0&&(m=a.reduce((p,_)=>p+parseInt(_.images||1),0)),e.addCsv(t,h,m,u,g),e.addRows(a),h.forEach(p=>{let _=p.url;p.csv=_,dr(_,e,p)})}})}async function _r(t){return await fetch(t).then(e=>e.json())}function ut(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function Xr(t,e){return Array.from({length:e-t},(n,i)=>i+t)}function $r(t,e,n){const i=t[0].shape,r=i[0],s=i[1],o=r*s;e||(e=t.map(gr));let a=performance.now(),l=new Uint8ClampedArray(4*r*s).fill(0),h=0;for(let u=0;u<o;u++){for(let g=0;g<t.length;g++){let m=n[g],p=t[g].data,_=e[g],N=(p[u]-_[0])/(_[1]-_[0]);for(let z=0;z<3;z++){let L=N*m[z]<<0;l[h*4+z]=Math.max(l[h*4+z],L)}}l[h*4+3]=255,h+=1}return performance.now()-a<100&&ts(l,5)[4]<1&&(l=es(l,2)),l}function es(t,e){for(let n=0;n<t.length/4;n++)for(let i=0;i<3;i++){let r=t[n*4+i];r=Math.min(255,r*e),t[n*4+i]=r}return t}function ts(t,e=5){let n=new Array(e).fill(0);const i=256/e;let r=t.length/4;for(let s=0;s<r;s++){let o=t[s*4];o=Math.max(t[s*4+1],o),o=Math.max(t[s*4+2],o);let a=Math.floor(o/i);n[a]+=1}return n=n.map(s=>100*s/r),n}function gr(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let o=e[s];n=Math.max(n,o),i=Math.min(i,o)}return[i,n]}const hn=4,at={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},ns=[at.magenta,at.green],is=[at.red,at.green,at.blue],_i=Object.values(at).slice(0,-2);function rs(t){let e;return t<=hn?e=Array(t).fill(!0):e=[...Array(hn).fill(!0),...Array(t-hn).fill(!1)],e}function ss(t,e){let n=[];if(t==1)n=[at.white];else if(t==2)n=ns;else if(t===3)n=is;else if(t<=hn)n=_i.slice(0,t);else{n=Array(t).fill(at.white);const i=e.flatMap((r,s)=>r?s:[]);for(const[r,s]of i.entries())n[s]=_i[r]}return n.map(mr)}function mr(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}class pr{constructor(){this.store=Ln({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await _r(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=Nt(this.store);[...new Set(e)].forEach(r=>{r&&(n[r]||(n[r]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(r).then(s=>{this.addEntry(r,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(i=>(i[e]=n,i))}subscribe(e){return this.store.subscribe(e)}}class os extends pr{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await _r(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const br=new pr,vr=new os,gi=5;async function jt(t,e){var r;let n=await fetch(`${t}/zarr.json`,{signal:e}).then(s=>{if(s.status===404)throw new Error(`${t}/zarr.json not found`);return s.json()}).catch(s=>[void 0,t]);const i=(r=n==null?void 0:n.attributes)==null?void 0:r.ome;if(!i)return[void 0,t];if(i.multiscales)return[i,t];if(i.plate){let s=i.plate.wells[0],o=`${t}/${s.path}/0`,[a,l]=await jt(o);return[a,l,i.plate]}else if(i["bioformats2raw.layout"]){let s=`${t}/0`;return await jt(s)}}class ls{constructor(e="index",n=!0){this.store=Ln([]),this.selectedRow=Ln(null),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let r of this.csvFiles){if(r.source===e){n=r;break}for(let s of r.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(r=>{let s=r.image_count||0,o=r.plate_count||0,a=r.bytes||0;for(let l of r.child_csv)s+=l.image_count||0,o+=l.plate_count||0,a+=l.bytes||0;return{...r,image_count:s,plate_count:o,bytes:a}}):[]}addCsv(e,n,i,r,s){n=n.map(a=>({...a,child_csv:[]}));let o;for(let a of this.csvFiles){if(a.url===e){o=a;break}for(let l of a.child_csv){if(l.url===e){o=l;break}for(let h of l.child_csv)if(h.url===e){o=h;break}}}o?(o.image_count=i,o.plate_count=r,o.bytes=s,o.child_csv=n):(o={url:e,image_count:i,plate_count:r,bytes:s,child_csv:n},this.csvFiles.push(o))}addRows(e){e=e.map((r,s)=>{if(r.written&&(r.written=parseFloat(r.written)),r.shape){let o=r.shape.split(",").map(l=>parseInt(l)),a;r.dimension_names?a=r.dimension_names.split(","):o.length==5&&(a=["t","c","z","y","x"]),a&&a.length==o.length&&a.forEach((l,h)=>r["size_"+l]=o[h]),r.dim_count=o.reduce((l,h)=>l+(h>1?1:0),0)}if(r.chunks){let o=r.chunks.split(",").map(a=>parseInt(a));r.chunk_pixels=o.reduce((a,l)=>a*l,1)}if(r.shards){let o=r.shards.split(",").map(a=>parseInt(a));r.shard_pixels=o.reduce((a,l)=>a*l,1)}return r.index=Math.random()*(1+s),r}),console.log("Adding rows",e),this.store.update(r=>(r.push(...e),r.sort((s,o)=>this.compareRows(s,o,!0)),r));let n=e.map(r=>r.organismId);br.addTerms(n);let i=e.map(r=>r.fbbiId);vr.addTerms(i)}populateRow(e,n){this.store.update(i=>(i=i.map(r=>(r.url===e&&(r={...r,...n}),r)),i))}async loadNgffMetadata(e){var m;const[n,i,r]=await jt(e);let s=[],o=0,a=0,l=!1,h=!0,u={multiscales:n},g=i;if(r&&(o=r.wells.length,a=r.field_count||1),n){const p=(m=n[0])==null?void 0:m.datasets[0],_=p==null?void 0:p.path;if(_){const E=await fetch(`${i}/${_}/zarr.json`).then(N=>N.json()).catch(N=>{console.log(`----> Failed to parse ${i}/${_}/zarr.json`,N)});s=E==null?void 0:E.shape}}else console.log("No multiscales found"),l=!0,s=[0];this.populateRow(e,{image_attrs:u,image_url:g,shape:s,well_count:o,field_count:a,load_failed:l,loaded:h})}async loadRocrateJsonAllRows(){let e=Nt(this.store);for(let n=0;n<e.length;n=n+gi){let i=Xr(n,Math.min(n+gi,e.length)).map(r=>this.loadRocrateJson(e[r].url));await Promise.all(i)}}compareRows(e,n,i=!1){let r=e[this.sortColumn],s=n[this.sortColumn];if(i)return r===void 0&&(r=0),s===void 0&&(s=0),r<s?this.sortAscending?-1:1:r>s?this.sortAscending?1:-1:0;r===void 0&&(r=""),s===void 0&&(s="");let o=0;return i?o=r-s:o=r.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){console.log("sortTable",e,n),this.sortColumn=e,this.sortAscending=n;let i=this.isColumnNumeric(e);this.store.update(r=>(r.sort((s,o)=>this.compareRows(s,o,i)),r))}isColumnNumeric(e){let n=Nt(this.store);for(let i of n){let r=i[e];if(r!==void 0&&r!=="")return!isNaN(r)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return Nt(this.store)}getRow(e){return Nt(this.store)[e]}subscribeSelectedRow(e){return this.selectedRow.subscribe(e)}setSelectedRow(e){this.selectedRow.set(e)}}const Ae=new ls;function as(t){let e,n,i,r,s,o;return{c(){e=y("button"),n=y("span"),n.textContent="^",i=G(),r=y("span"),r.textContent="^",b(n,"class","acc svelte-17vd65t"),Et(n,"strong",t[1]),b(r,"class","dec svelte-17vd65t"),Et(r,"strong",!t[1]),b(e,"class","svelte-17vd65t")},m(a,l){x(a,e,l),d(e,n),d(e,i),d(e,r),s||(o=we(e,"click",t[2]),s=!0)},p(a,[l]){l&2&&Et(n,"strong",a[1]),l&2&&Et(r,"strong",!a[1])},i:ke,o:ke,d(a){a&&q(e),s=!1,o()}}}function us(t,e,n){let{toggleAscending:i}=e,{sortAscending:r}=e;const s=()=>i();return t.$$set=o=>{"toggleAscending"in o&&n(0,i=o.toggleAscending),"sortAscending"in o&&n(1,r=o.sortAscending)},[i,r,s]}class cs extends Ze{constructor(e){super(),Je(this,e,us,as,Ue,{toggleAscending:0,sortAscending:1})}}const cn={AUTO:"auto",START:"start",CENTER:"center",END:"end"},rt={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Ft={OBSERVED:0,REQUESTED:1},fs={[rt.VERTICAL]:"top",[rt.HORIZONTAL]:"left"},mi={[rt.VERTICAL]:"scrollTop",[rt.HORIZONTAL]:"scrollLeft"};class hs{constructor({itemSize:e,itemCount:n,estimatedItemSize:i}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:i}){n!=null&&(this.itemCount=n),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const i=this.getSize(n),r=e;e+=i,this.itemSizeAndPositionData[n]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let i=n.offset+n.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=cn.START,containerSize:n,currentOffset:i,targetIndex:r}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(r),o=s.offset,a=o-n+s.size;let l;switch(e){case cn.END:l=a;break;case cn.CENTER:l=o-(n-s.size)/2;break;case cn.START:l=o;break;default:l=Math.max(a,Math.min(o,i))}const h=this.getTotalSize();return Math.max(0,Math.min(h-n,l))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const a=this.getSizeAndPositionForIndex(o);n=a.offset+a.size;let l=o;for(;n<s&&l<this.itemCount-1;)l++,n+=this.getSizeAndPositionForIndex(l).size;return i&&(o=Math.max(0,o-i),l=Math.min(l+i,this.itemCount-1)),{start:o,stop:l}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:n,offset:i}){let r=0,s=0;for(;e<=n;){if(r=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(n=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const ds=t=>({}),pi=t=>({});function bi(t,e,n){const i=t.slice();return i[37]=e[n],i}const _s=t=>({style:t[0]&4,index:t[0]&4}),vi=t=>({style:t[37].style,index:t[37].index}),gs=t=>({}),wi=t=>({});function yi(t,e){let n,i;const r=e[21].item,s=Tn(r,e,e[20],vi);return{key:t,first:null,c(){n=bn(),s&&s.c(),this.first=n},m(o,a){x(o,n,a),s&&s.m(o,a),i=!0},p(o,a){e=o,s&&s.p&&(!i||a[0]&1048580)&&zn(s,r,e,e[20],i?On(r,e[20],a,_s):Rn(e[20]),vi)},i(o){i||(re(s,o),i=!0)},o(o){he(s,o),i=!1},d(o){o&&q(n),s&&s.d(o)}}}function ms(t){let e,n,i,r=[],s=new Map,o,a;const l=t[21].header,h=Tn(l,t,t[20],wi);let u=Ne(t[2]);const g=_=>_[0]?_[0](_[37].index):_[37].index;for(let _=0;_<u.length;_+=1){let E=bi(t,u,_),N=g(E);s.set(N,r[_]=yi(N,E))}const m=t[21].footer,p=Tn(m,t,t[20],pi);return{c(){e=y("div"),h&&h.c(),n=G(),i=y("div");for(let _=0;_<r.length;_+=1)r[_].c();o=G(),p&&p.c(),b(i,"class","virtual-list-inner svelte-dwpad5"),b(i,"style",t[4]),b(e,"class","virtual-list-wrapper svelte-dwpad5"),b(e,"style",t[3])},m(_,E){x(_,e,E),h&&h.m(e,null),d(e,n),d(e,i);for(let N=0;N<r.length;N+=1)r[N]&&r[N].m(i,null);d(e,o),p&&p.m(e,null),t[22](e),a=!0},p(_,E){h&&h.p&&(!a||E[0]&1048576)&&zn(h,l,_,_[20],a?On(l,_[20],E,gs):Rn(_[20]),wi),E[0]&1048581&&(u=Ne(_[2]),Ot(),r=fr(r,E,g,1,_,u,s,i,qr,yi,null,bi),zt()),(!a||E[0]&16)&&b(i,"style",_[4]),p&&p.p&&(!a||E[0]&1048576)&&zn(p,m,_,_[20],a?On(m,_[20],E,ds):Rn(_[20]),pi),(!a||E[0]&8)&&b(e,"style",_[3])},i(_){if(!a){re(h,_);for(let E=0;E<u.length;E+=1)re(r[E]);re(p,_),a=!0}},o(_){he(h,_);for(let E=0;E<r.length;E+=1)he(r[E]);he(p,_),a=!1},d(_){_&&q(e),h&&h.d(_);for(let E=0;E<r.length;E+=1)r[E].d();p&&p.d(_),t[22](null)}}}const ps=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function bs(t,e,n){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:a}=e,{itemSize:l}=e,{estimatedItemSize:h=null}=e,{stickyIndices:u=null}=e,{getKey:g=null}=e,{scrollDirection:m=rt.VERTICAL}=e,{scrollOffset:p=null}=e,{scrollToIndex:_=null}=e,{scrollToAlignment:E=null}=e,{scrollToBehaviour:N="instant"}=e,{overscanCount:z=3}=e;const L=Dr(),Y=new hs({itemCount:a,itemSize:l,estimatedItemSize:te()});let H=!1,X,J=[],S={offset:p||_!=null&&J.length&&C(_)||0,scrollChangeReason:Ft.REQUESTED},f=S,c={scrollToIndex:_,scrollToAlignment:E,scrollOffset:p,itemCount:a,itemSize:l,estimatedItemSize:h},k={},O="",T="";Q(),$t(()=>{n(18,H=!0),X.addEventListener("scroll",R,ps),p!=null?U(p):_!=null&&U(C(_))}),xn(()=>{H&&X.removeEventListener("scroll",R)});function M(){if(!H)return;const v=c.scrollToIndex!==_||c.scrollToAlignment!==E,D=c.itemCount!==a||c.itemSize!==l||c.estimatedItemSize!==h;D&&(Y.updateConfig({itemSize:l,itemCount:a,estimatedItemSize:te()}),w()),c.scrollOffset!==p?n(19,S={offset:p||0,scrollChangeReason:Ft.REQUESTED}):typeof _=="number"&&(v||D)&&n(19,S={offset:C(_,E,a),scrollChangeReason:Ft.REQUESTED}),c={scrollToIndex:_,scrollToAlignment:E,scrollOffset:p,itemCount:a,itemSize:l,estimatedItemSize:h}}function j(){if(!H)return;const{offset:v,scrollChangeReason:D}=S;(f.offset!==v||f.scrollChangeReason!==D)&&Q(),f.offset!==v&&D===Ft.REQUESTED&&U(v),f=S}function Q(){const{offset:v}=S,{start:D,stop:W}=Y.getVisibleRange({containerSize:m===rt.VERTICAL?s:o,offset:v,overscanCount:z});let ne=[];const ie=Y.getTotalSize();m===rt.VERTICAL?(n(3,O=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,T=`flex-direction:column;height:${ie}px;`)):(n(3,O=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,T=`min-height:100%;width:${ie}px;`));const P=u!=null&&u.length!==0;if(P)for(let Z=0;Z<u.length;Z++){const ue=u[Z];ne.push({index:ue,style:A(ue,!0)})}if(D!==void 0&&W!==void 0){for(let Z=D;Z<=W;Z++)P&&u.includes(Z)||ne.push({index:Z,style:A(Z,!1)});L("itemsUpdated",{start:D,end:W})}n(2,J=ne)}function U(v){"scroll"in X?X.scroll({[fs[m]]:v,behavior:N}):n(1,X[mi[m]]=v,X)}function w(v=0){k={},Y.resetItem(v),Q()}function C(v,D=E,W=a){return(v<0||v>=W)&&(v=0),Y.getUpdatedOffsetForIndex({align:D,containerSize:m===rt.VERTICAL?s:o,currentOffset:S.offset||0,targetIndex:v})}function R(v){const D=F();D<0||S.offset===D||v.target!==X||(n(19,S={offset:D,scrollChangeReason:Ft.OBSERVED}),L("afterScroll",{offset:D,event:v}))}function F(){return X[mi[m]]}function te(){return h||typeof l=="number"&&l||50}function A(v,D){if(k[v])return k[v];const{size:W,offset:ne}=Y.getSizeAndPositionForIndex(v);let ie;return m===rt.VERTICAL?(ie=`left:0;width:100%;height:${W}px;`,D?ie+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${ne}px;margin-bottom:${-(ne+W)}px;`:ie+=`position:absolute;top:${ne}px;`):(ie=`top:0;width:${W}px;`,D?ie+=`position:sticky;z-index:1;left:0;margin-left:${ne}px;margin-right:${-(ne+W)}px;`:ie+=`position:absolute;height:100%;left:${ne}px;`),k[v]=ie}function V(v){Tt[v?"unshift":"push"](()=>{X=v,n(1,X)})}return t.$$set=v=>{"height"in v&&n(5,s=v.height),"width"in v&&n(6,o=v.width),"itemCount"in v&&n(7,a=v.itemCount),"itemSize"in v&&n(8,l=v.itemSize),"estimatedItemSize"in v&&n(9,h=v.estimatedItemSize),"stickyIndices"in v&&n(10,u=v.stickyIndices),"getKey"in v&&n(0,g=v.getKey),"scrollDirection"in v&&n(11,m=v.scrollDirection),"scrollOffset"in v&&n(12,p=v.scrollOffset),"scrollToIndex"in v&&n(13,_=v.scrollToIndex),"scrollToAlignment"in v&&n(14,E=v.scrollToAlignment),"scrollToBehaviour"in v&&n(15,N=v.scrollToBehaviour),"overscanCount"in v&&n(16,z=v.overscanCount),"$$scope"in v&&n(20,r=v.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&M(),t.$$.dirty[0]&524288&&j(),t.$$.dirty[0]&263264&&H&&w(0)},[g,X,J,O,T,s,o,a,l,h,u,m,p,_,E,N,z,w,H,S,r,i,V]}class vs extends Ze{constructor(e){super(),Je(this,e,bs,ms,Ue,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),De()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),De()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),De()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),De()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),De()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),De()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),De()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),De()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),De()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),De()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),De()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),De()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),De()}get recomputeSizes(){return this.$$.ctx[17]}}class en extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Gn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const ws="modulepreload",ys=function(t){return"https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/"+t},ki={},Dt=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=ys(a),a in ki)return;ki[a]=!0;const l=a.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${h}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":ws,l||(u.as="script"),u.crossOrigin="",u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),l)return new Promise((g,m)=>{u.addEventListener("load",g),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Ge;class wr{constructor(e,n,i){Te(this,Ge);typeof e=="number"?Ee(this,Ge,new Uint8Array(e)):e instanceof ArrayBuffer?Ee(this,Ge,new Uint8Array(e,n,i)):Ee(this,Ge,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return ee(this,Ge).byteOffset}get byteLength(){return ee(this,Ge).byteLength}get buffer(){return ee(this,Ge).buffer}get length(){return ee(this,Ge).length}get(e){let n=ee(this,Ge)[e];return typeof n=="number"?n!==0:n}set(e,n){ee(this,Ge)[e]=n?1:0}fill(e){ee(this,Ge).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Ge=new WeakMap;var At;class Vn{constructor(e,n,i,r){oe(this,"_data");oe(this,"chars");Te(this,At);if(this.chars=e,Ee(this,At,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set(ee(this,At).encode(n))}fill(e){const n=ee(this,At).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}At=new WeakMap;var ze;const Yn=class Yn{constructor(e,n,i,r){Te(this,ze);oe(this,"chars");if(this.chars=e,typeof n=="number")Ee(this,ze,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),Ee(this,ze,new Int32Array(n,i,r));else{const s=n,o=new Yn(e,1);Ee(this,ze,new Int32Array(function*(){for(let a of s)o.set(0,a),yield*ee(o,ze)}()))}}get BYTES_PER_ELEMENT(){return ee(this,ze).BYTES_PER_ELEMENT*this.chars}get byteLength(){return ee(this,ze).byteLength}get byteOffset(){return ee(this,ze).byteOffset}get buffer(){return ee(this,ze).buffer}get length(){return ee(this,ze).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint(ee(this,ze)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=ee(this,ze).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=ee(this,ze).subarray(0,this.chars);for(let i=1;i<this.length;i++)ee(this,ze).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};ze=new WeakMap;let qt=Yn;function tn(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Ei(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)r=t[s+o],t[s+o]=t[s+i-o],t[s+i-o]=r}const ks={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:wr},Es=/v2:([US])(\d+)/;function yr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(Es);if(e){let[,i,r]=e;return(i==="U"?qt:Vn).bind(null,Number(r))}let n=ks[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function pt(t,e){return(e==="C"?Is:Cs)(t)}function Is(t){const e=t.length,n=globalThis.Array(e);for(let i=e-1,r=1;i>=0;i--)n[i]=r,r*=t[i];return n}function Cs(t){const e=t.length,n=globalThis.Array(e);for(let i=0,r=1;i<e;i++)n[i]=r,r*=t[i];return n}function As({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function Fn(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const Ss=/^([<|>])(.*)$/;function Ts(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(Ss);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function Os(t,e={}){let n=[],i=Ts(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function zs(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function Rs(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function Ms(t){return(t==null?void 0:t.name)==="sharding_indexed"}function kr(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const Ii=Ls();function Ls(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function Ci(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var xt,lt,Gt,Vt,St;const Qn=class Qn{constructor(e,n){oe(this,"kind","array_to_bytes");Te(this,xt);Te(this,lt);Te(this,Gt);Te(this,Vt);Te(this,St);Ee(this,St,e==null?void 0:e.endian),Ee(this,lt,yr(n.data_type)),Ee(this,Vt,n.shape),Ee(this,xt,pt(n.shape,Fn(n.codecs)));const i=new(ee(this,lt))(0);Ee(this,Gt,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new Qn(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return Ii&&ee(this,St)==="big"&&Ei(n,Ci(ee(this,lt))),n}decode(e){return Ii&&ee(this,St)==="big"&&Ei(e,Ci(ee(this,lt))),{data:new(ee(this,lt))(e.buffer,e.byteOffset,e.byteLength/ee(this,Gt)),shape:ee(this,Vt),stride:ee(this,xt)}}};xt=new WeakMap,lt=new WeakMap,Gt=new WeakMap,Vt=new WeakMap,St=new WeakMap;let mn=Qn;class Wn{constructor(){oe(this,"kind","bytes_to_bytes")}static fromConfig(){return new Wn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function Fs(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function Ds(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var Wt,Ht;const Xn=class Xn{constructor(e={}){oe(this,"configuration");oe(this,"kind","array_to_bytes");Te(this,Wt);Te(this,Ht);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:a=!0,indent:l,strict:h=!0}=e;let u=e.separators;u||(l?u=[", ",": "]:u=[",",":"]),Ee(this,Wt,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:o,indent:l,separators:u,sort_keys:a}),Ee(this,Ht,{strict:h})}static fromConfig(e){return new Xn(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:o,sort_keys:a}=ee(this,Wt);if(i!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const l=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||l.push(Fs),a&&l.push(Ds);const h=Array.from(e.data);h.push("|O"),h.push(e.shape);let u;l.length&&(u=(m,p)=>{let _=p;for(let E of l)_=E(m,_);return _});let g=JSON.stringify(h,u,n);return r&&(g=g.replace(/[\u007F-\uFFFF]/g,m=>{const p=`0000${m.charCodeAt(0).toString(16)}`;return`\\u${p.substring(p.length-4)}`})),new TextEncoder().encode(g)}decode(e){const{strict:n}=ee(this,Ht);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const i=tn(e),r=i.pop();if(i.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const s=pt(r,"C");return{data:i,shape:r,stride:s}}};Wt=new WeakMap,Ht=new WeakMap;let Dn=Xn;function Ai(t){return t instanceof wr||t instanceof Vn||t instanceof qt?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function Ns(t,e){let n;return t.data instanceof Vn||t.data instanceof qt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:pt(t.shape,e)}}function Ps(t,e){let n=Ns(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),o=Ai(t.data),a=Ai(n.data);for(let l=0;l<r;l++){let h=0;for(let u=0;u<i;u++)h+=s[u]*n.stride[u];a[h]=o[l],s[0]+=1;for(let u=0;u<i;u++)if(s[u]===t.shape[u]){if(u+1===i)break;s[u]=0,s[u+1]+=1}}return n}function Bs(t){if(!t.stride)return"C";let e=pt(t.shape,"C");return t.stride.every((n,i)=>n===e[i])?"C":"F"}class Hn{constructor(e){oe(this,"configuration");oe(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Hn(e)}encode(e){var n,i;return Bs(e)===((n=this.configuration)==null?void 0:n.order)?e:Ps(e,((i=this.configuration)==null?void 0:i.order)??"C")}decode(e){return e}}var Kt,Jt;const $n=class $n{constructor(e){oe(this,"kind","array_to_bytes");Te(this,Kt);Te(this,Jt);Ee(this,Kt,e),Ee(this,Jt,pt(e,"C"))}static fromConfig(e,n){return new $n(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let o=0;o<r.length;o++){let a=i.getUint32(s,!0);s+=4,r[o]=n.decode(e.buffer.slice(s,s+a)),s+=a}return{data:r,shape:ee(this,Kt),stride:ee(this,Jt)}}};Kt=new WeakMap,Jt=new WeakMap;let Nn=$n;function Us(){return new Map().set("blosc",()=>Dt(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>Dt(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>Dt(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>Dt(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>Dt(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Hn).set("bytes",()=>mn).set("crc32c",()=>Wn).set("vlen-utf8",()=>Nn).set("json2",()=>Dn)}const js=Us();function Pn(t){let e;return{async encode(n){e||(e=await Si(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await Si(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function Si(t){let e=t.codecs.map(async s=>{var a;let o=await((a=js.get(s.name))==null?void 0:a());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:o}of e){let a=s.fromConfig(o.configuration,t);switch(a.kind){case"array_to_array":n.push(a);break;case"array_to_bytes":i=a;break;default:r.push(a)}}if(!i){if(!qs(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);i=mn.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function qs(t){return t.data_type!=="v2:object"}const Ti=18446744073709551615n;function xs(t,e,n,i){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((l,h)=>l/i.chunk_shape[h]),o=Pn({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),a={};return async l=>{let h=l.map((L,Y)=>Math.floor(L/s[Y])),u=t.resolve(n(h)).path,g;if(u in a)g=a[u];else{let L=4,Y=16*s.reduce((X,J)=>X*J,1),H=await r(u,{suffixLength:Y+L});g=a[u]=H?await o.decode(H):null}if(g===null)return;let{data:m,shape:p,stride:_}=g,E=l.map((L,Y)=>L%p[Y]).reduce((L,Y,H)=>L+Y*_[H],0),N=m[E],z=m[E+1];if(!(N===Ti&&z===Ti))return r(u,{offset:Number(N),length:Number(z)})}}class Rt{constructor(e,n="/"){oe(this,"store");oe(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Rt(this.store,new URL(e,n).pathname)}}var Zt;class Kn extends Rt{constructor(n,i,r){super(n,i);oe(this,"kind","group");Te(this,Zt);Ee(this,Zt,r)}get attrs(){return ee(this,Zt).attributes}}Zt=new WeakMap;const Pt=Symbol("zarrita.context");function Gs(t){return t[Pt]}function Vs(t,e){let{configuration:n}=e.codecs.find(Ms)??{},i={encode_chunk_key:As(e.chunk_key_encoding),TypedArray:yr(e.data_type),fill_value:e.fill_value};if(n){let s=Fn(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:Pn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,a){return pt(o,a??s)},get_chunk_bytes:xs(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=Fn(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:Pn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return pt(s,o??r)},async get_chunk_bytes(s,o){let a=i.encode_chunk_key(s),l=t.resolve(a).path;return t.store.get(l,o)}}}var or,lr,mt,ar;let pn=(ar=class extends(lr=Rt,or=Pt,lr){constructor(n,i,r){super(n,i);oe(this,"kind","array");Te(this,mt);oe(this,or);Ee(this,mt,{...r,fill_value:kr(r)}),this[Pt]=Vs(this,r)}get attrs(){return ee(this,mt).attributes}get shape(){return ee(this,mt).shape}get chunks(){return this[Pt].chunk_shape}get dtype(){return ee(this,mt).data_type}async getChunk(n,i){let r=this[Pt],s=await r.get_chunk_bytes(n,i);if(!s){let o=r.chunk_shape.reduce((l,h)=>l*h,1),a=new r.TypedArray(o);return a.fill(r.fill_value),{data:a,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return Rs(this.dtype,n)}},mt=new WeakMap,ar),vn=Ws();function Ws(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function Hs(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?tn(e):{}}async function Ks(t,e={}){let n="store"in t?t:new Rt(t),i={};return(e.attrs??!0)&&(i=await Hs(n)),e.kind==="array"?Oi(n,i):e.kind==="group"?zi(n,i):Oi(n,i).catch(r=>{if(r instanceof en)return zi(n,i);throw r})}async function Oi(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new en("v2 array",{cause:new Gn(n)});return vn.increment(t.store,"v2"),new pn(t.store,t.path,Os(tn(i),e))}async function zi(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new en("v2 group",{cause:new Gn(n)});return vn.increment(t.store,"v2"),new Kn(t.store,t.path,zs(tn(i),e))}async function Js(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new en("v3 array or group",{cause:new Gn(n)});let r=tn(i);return r.node_type==="array"&&(r.fill_value=kr(r)),r.node_type==="array"?new pn(e,t.path,r):new Kn(e,t.path,r)}async function Zs(t,e={}){let n="store"in t?t:new Rt(t),i=await Js(n);if(vn.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof pn||e.kind==="group"&&i instanceof Kn)return i;let r=i instanceof pn?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function gt(t,e={}){let n="store"in t?t.store:t,i=vn.version_max(n),r=i==="v2"?gt.v2:gt.v3,s=i==="v2"?gt.v3:gt.v2;return r(t,e).catch(o=>{if(o instanceof en)return s(t,e);throw o})}gt.v2=Ks;gt.v3=Zs;function*Ys(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*Qs(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function Xs({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,o]=r?[-1,i-1]:[0,i];return t===null?t=r?o:s:t<0?(t+=i,t<s&&(t=s)):t>o&&(t=o),e===null?e=r?s:o:e<0?(e+=i,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function Bn(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function $s(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class Jn extends Error{constructor(e){super(e),this.name="IndexError"}}function eo(t,e){throw new Jn(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function to(t){throw new Jn(`index out of bounds for dimension with length ${t}`)}function no(){throw new Jn("only slices with step >= 1 are supported")}function io(t,e){t.length>e.length&&eo(t,e)}function ro(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&to(e),t}class so{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){oe(this,"dim_sel");oe(this,"dim_len");oe(this,"dim_chunk_len");oe(this,"nitems");e=ro(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class Ri{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){oe(this,"start");oe(this,"stop");oe(this,"step");oe(this,"dim_len");oe(this,"dim_chunk_len");oe(this,"nitems");oe(this,"nchunks");const[r,s,o]=Xs(e,n);this.start=r,this.stop=s,this.step=o,this.step<1&&no(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of Ys(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),o=s-r;let a=0,l=0;if(this.start<r){const p=(r-this.start)%this.step;p&&(l+=this.step-p),a=Math.ceil((r-this.start)/this.step)}else l=this.start-r;const h=this.stop>s?o:this.stop-r,u=[l,h,this.step],g=Math.ceil((h-l)/this.step),m=[a,a+g,1];yield{dim_chunk_ix:i,dim_chunk_sel:u,dim_out_sel:m}}}}function oo(t,e){let n=[];return t===null?n=e.map(i=>Bn(null)):Array.isArray(t)&&(n=t.map(i=>i??Bn(null))),io(n,e),n}class lo{constructor({selection:e,shape:n,chunk_shape:i}){oe(this,"dim_indexers");oe(this,"shape");this.dim_indexers=oo(e,n).map((r,s)=>new(typeof r=="number"?so:Ri)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof Ri).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of Qs(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function ao(t,e){return"get"in t?t.get(e):t[e]}async function uo(t,e,n,i){var l;let r=Gs(t),s=new lo({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=i.prepare(new r.TypedArray(s.shape.reduce((h,u)=>h*u,1)),s.shape,r.get_strides(s.shape,n.order)),a=((l=n.create_queue)==null?void 0:l.call(n))??$s();for(const{chunk_coords:h,mapping:u}of s)a.add(async()=>{let{data:g,shape:m,stride:p}=await t.getChunk(h,n.opts),_=i.prepare(g,m,p);i.set_from_chunk(o,_,u)});return await a.onIdle(),s.shape.length===0?ao(o.data,0):o}function Zn(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return Zn(t,e+r,s-r)},set(r,s=0){for(let o=0;o<r.length;o++)t[e+s+o]=r.get(o)},get(r){return t[e+r]}}}function An(t){return globalThis.Array.isArray(t.data)?{data:Zn(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function co(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function fo(t,e){if(globalThis.Array.isArray(t.data))return Zn([e]);let n=co(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const ho={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=An(t);Un(i,e,fo(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=An(t);dn(i,An(e),i.bytes_per_element,n)}};async function _o(t,e=null,n={}){return uo(t,e,n,ho)}function Er(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Un(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[o,...a]=t.stride;if(typeof r=="number"){const m=t.data.subarray(o*r*i);Un({data:m,stride:a},s,n,i);return}const[l,h,u]=r,g=Er(l,h,u);if(s.length===0){for(let m=0;m<g;m++)t.data.set(n,o*(l+u*m)*i);return}for(let m=0;m<g;m++){const p=t.data.subarray(o*(l+u*m)*i);Un({data:p,stride:a},s,n,i)}}function dn(t,e,n,i){const[r,...s]=i,[o,...a]=t.stride,[l,...h]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}dn({data:t.data.subarray(o*r.to*n),stride:a},e,n,s);return}if(r.to===null){if(s.length===0){let z=r.from*n;t.data.set(e.data.subarray(z,z+n),0);return}dn(t,{data:e.data.subarray(l*r.from*n),stride:h},n,s);return}const[u,g,m]=r.to,[p,_,E]=r.from,N=Er(u,g,m);if(s.length===0){if(m===1&&E===1&&o===1&&l===1){let z=p*n,L=N*n;t.data.set(e.data.subarray(z,z+L),u*n);return}for(let z=0;z<N;z++){let L=l*(p+E*z)*n;t.data.set(e.data.subarray(L,L+n),o*(u+m*z)*n)}return}for(let z=0;z<N;z++)dn({data:t.data.subarray(o*(u+z*m)*n),stride:a},{data:e.data.subarray(l*(p+z*E)*n),stride:h},n,s)}function Ir(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function go(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function Mi(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function Li(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function mo(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),o=Number(s);return Ir(t,o-e,o,n)}var Yt,Qt,Xt,jn;class po{constructor(e,n={}){Te(this,Xt);oe(this,"url");Te(this,Yt);Te(this,Qt);this.url=e,Ee(this,Yt,n.overrides??{}),Ee(this,Qt,n.useSuffixRequest??!1)}async get(e,n={}){let i=Mi(this.url,e).href,r=await fetch(i,In(this,Xt,jn).call(this,n));return Li(r)}async getRange(e,n,i={}){let r=Mi(this.url,e),s=In(this,Xt,jn).call(this,i),o;return"suffixLength"in n?o=await mo(r,n.suffixLength,s,ee(this,Qt)):o=await Ir(r,n.offset,n.length,s),Li(o)}}Yt=new WeakMap,Qt=new WeakMap,Xt=new WeakSet,jn=function(e){return go(ee(this,Yt),e)};function bo(t){let e,n;return{c(){e=y("div"),n=y("canvas"),ae(n,"width",t[3]+"px"),ae(n,"height",t[4]+"px"),ae(n,"background-color","lightgrey"),b(n,"height",t[2]),b(n,"width",t[1]),b(n,"class","svelte-lwhhyg"),b(e,"class","canvasWrapper svelte-lwhhyg"),ae(e,"width",t[3]+"px"),ae(e,"height",t[4]+"px"),Et(e,"spinner",t[5])},m(i,r){x(i,e,r),d(e,n),t[12](n)},p(i,[r]){r&8&&ae(n,"width",i[3]+"px"),r&16&&ae(n,"height",i[4]+"px"),r&4&&b(n,"height",i[2]),r&2&&b(n,"width",i[1]),r&8&&ae(e,"width",i[3]+"px"),r&16&&ae(e,"height",i[4]+"px"),r&32&&Et(e,"spinner",i[5])},i:ke,o:ke,d(i){i&&q(e),t[12](null)}}}function vo(t,e,n){let{source:i}=e,{attrs:r}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{cssSize:a=120}=e,{max_size:l=512}=e,h,u=a,g=a;o>1?g=u/o:o<1&&(u=g*o);let m=u,p=g,_=!0;const E=new AbortController;async function N(){var R;let L=r.multiscales[0].datasets.map(F=>F.path),Y=r.multiscales[0].axes.map(F=>F.name),H=L.at(-1);s!=null&&s<L.length&&(H=L[s]);const X=new po(i+"/"+H),J=await gt.v3(X,{kind:"array"});let S=Y.indexOf("c"),f=J.shape;if(f.at(-1)*f.at(-2)>l*l){console.log("Lowest resolution too large for Thumbnail: ",f,i);return}let c=f.length,k=f[S]||1,O,T;(R=r==null?void 0:r.omero)!=null&&R.channels?(O=r.omero.channels.map(F=>F.active),T=r.omero.channels.map(F=>mr(F.color))):(O=rs(k),T=ss(k,O)),T=T.filter((F,te)=>O[te]);let j=O.reduce((F,te,A)=>(te&&F.push(A),F),[]).map(F=>{let te=f.map((A,V)=>V==S?F:V>=c-2?Bn(0,A):Y[V]=="z"||Y[V]=="t"?parseInt(A/2+""):0);return _o(J,te,{opts:{signal:E.signal}})}),Q=await Promise.all(j),U=Q.map(F=>gr(F)),w=$r(Q,U,T);n(1,u=f.at(-1)),n(2,g=f.at(-2));let C=u/a;g>u&&(C=g/a),n(3,m=u/C),n(4,p=g/C),setTimeout(()=>{const F=h.getContext("2d");n(5,_=!1),F.putImageData(new ImageData(w,u,g),0,0)},100)}$t(()=>{N()}),xn(()=>{E.abort()});function z(L){Tt[L?"unshift":"push"](()=>{h=L,n(0,h)})}return t.$$set=L=>{"source"in L&&n(6,i=L.source),"attrs"in L&&n(7,r=L.attrs),"thumbDatasetIndex"in L&&n(8,s=L.thumbDatasetIndex),"thumbAspectRatio"in L&&n(9,o=L.thumbAspectRatio),"cssSize"in L&&n(10,a=L.cssSize),"max_size"in L&&n(11,l=L.max_size)},[h,u,g,m,p,_,i,r,s,o,a,l,z]}class Cr extends Ze{constructor(e){super(),Je(this,e,vo,bo,Ue,{source:6,attrs:7,thumbDatasetIndex:8,thumbAspectRatio:9,cssSize:10,max_size:11})}}function Fi(t,e,n){const i=t.slice();return i[12]=e[n],i}function Di(t){let e,n;return e=new Cr({props:{source:t[4],attrs:t[3],max_size:2e3,thumbDatasetIndex:t[5],thumbAspectRatio:t[6]}}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r&16&&(s.source=i[4]),r&8&&(s.attrs=i[3]),r&32&&(s.thumbDatasetIndex=i[5]),r&64&&(s.thumbAspectRatio=i[6]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function Ni(t){let e,n,i,r,s,o,a,l=t[0].source+"",h,u,g=t[0].csv&&Pi(t);return{c(){e=y("div"),n=y("span"),n.textContent="Data",i=G(),g&&g.c(),r=G(),s=y("span"),s.textContent="provided by",o=G(),a=y("strong"),h=B(l),u=B("."),b(n,"class","hideOnSmall svelte-afrxqy"),b(s,"class","hideOnSmall svelte-afrxqy"),ae(a,"color","grey")},m(m,p){x(m,e,p),d(e,n),d(e,i),g&&g.m(e,null),d(e,r),d(e,s),d(e,o),d(e,a),d(a,h),d(e,u)},p(m,p){m[0].csv?g?g.p(m,p):(g=Pi(m),g.c(),g.m(e,r)):g&&(g.d(1),g=null),p&1&&l!==(l=m[0].source+"")&&me(h,l)},d(m){m&&q(e),g&&g.d()}}}function Pi(t){var a;let e,n,i,r=((a=t[0].csv)==null?void 0:a.split("/").pop().replace(".csv",""))+"",s,o;return{c(){e=y("span"),e.textContent="from collection",n=G(),i=y("a"),s=B(r),b(e,"class","hideOnSmall svelte-afrxqy"),b(i,"title","Show collection in a new tab"),b(i,"href",o=qi(t[0])),b(i,"target","_blank")},m(l,h){x(l,e,h),x(l,n,h),x(l,i,h),d(i,s)},p(l,h){var u;h&1&&r!==(r=((u=l[0].csv)==null?void 0:u.split("/").pop().replace(".csv",""))+"")&&me(s,r),h&1&&o!==(o=qi(l[0]))&&b(i,"href",o)},d(l){l&&(q(e),q(n),q(i))}}}function Bi(t){let e,n,i,r,s,o;return{c(){e=B("Browse "),n=y("a"),i=B("Original data"),o=B("."),b(n,"title",r="Link to original data: "+t[0].origin),b(n,"href",s=t[0].origin),b(n,"target","_blank")},m(a,l){x(a,e,l),x(a,n,l),d(n,i),x(a,o,l)},p(a,l){l&1&&r!==(r="Link to original data: "+a[0].origin)&&b(n,"title",r),l&1&&s!==(s=a[0].origin)&&b(n,"href",s)},d(a){a&&(q(e),q(n),q(o))}}}function Ui(t){let e=t[12].toUpperCase()+"",n,i,r=t[0][`size_${t[12]}`]+"",s,o;return{c(){n=B(e),i=B(":"),s=B(r),o=B("  ")},m(a,l){x(a,n,l),x(a,i,l),x(a,s,l),x(a,o,l)},p(a,l){l&1&&r!==(r=a[0][`size_${a[12]}`]+"")&&me(s,r)},d(a){a&&(q(n),q(i),q(s),q(o))}}}function ji(t){let e,n=t[0][`size_${t[12]}`]!==void 0&&Ui(t);return{c(){n&&n.c(),e=bn()},m(i,r){n&&n.m(i,r),x(i,e,r)},p(i,r){i[0][`size_${i[12]}`]!==void 0?n?n.p(i,r):(n=Ui(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&q(e),n&&n.d(i)}}}function wo(t){let e,n,i=ut(t[0].written)+"",r;return{c(){e=y("div"),n=B("Data size: "),r=B(i)},m(s,o){x(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=ut(s[0].written)+"")&&me(r,i)},d(s){s&&q(e)}}}function yo(t){let e,n,i=t[0].shards+"",r;return{c(){e=y("div"),n=B("Shard shape: "),r=B(i)},m(s,o){x(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=s[0].shards+"")&&me(r,i)},d(s){s&&q(e)}}}function ko(t){let e,n,i=t[0].chunks+"",r;return{c(){e=y("div"),n=B("Chunk shape: "),r=B(i)},m(s,o){x(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=s[0].chunks+"")&&me(r,i)},d(s){s&&q(e)}}}function Eo(t){let e,n,i,r,s,o,a=t[9](t[0].url)+"",l,h,u,g=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",m,p,_,E=t[7].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",N,z,L,Y,H,X,J,S,f,c,k,O,T,M,j,Q,U=t[3]&&Di(t),w=t[0].source&&Ni(t),C=t[0].origin&&Bi(t),R=Ne(["t","c","z","y","x"]),F=[];for(let v=0;v<5;v+=1)F[v]=ji(Fi(t,R,v));function te(v,D){return v[2]=="chunk_pixels"?ko:v[2]=="shard_pixels"?yo:wo}let A=te(t),V=A(t);return{c(){e=y("div"),n=y("div"),U&&U.c(),i=G(),r=y("div"),s=y("div"),o=y("strong"),h=G(),u=y("div"),p=G(),_=y("div"),N=G(),w&&w.c(),z=G(),L=y("div"),Y=B("Open in "),H=y("a"),X=B("OME-Validator."),f=G(),C&&C.c(),c=G(),k=y("div"),O=B(`Image size:
      `);for(let v=0;v<5;v+=1)F[v].c();T=G(),V.c(),b(n,"class","thumbWrapper svelte-afrxqy"),b(s,"title",l=t[0].url),b(u,"class",m=fi(t[1]==""?"hideOnSmall":"")+" svelte-afrxqy"),b(H,"title",J="Open in Validator: "+t[0].url),b(H,"href",S="https://ome.github.io/ome-ngff-validator/?source="+t[0].url),b(H,"target","_blank"),b(e,"class","zarr-list-item svelte-afrxqy")},m(v,D){x(v,e,D),d(e,n),U&&U.m(n,null),d(e,i),d(e,r),d(r,s),d(s,o),o.innerHTML=a,d(r,h),d(r,u),u.innerHTML=g,d(r,p),d(r,_),_.innerHTML=E,d(r,N),w&&w.m(r,null),d(r,z),d(r,L),d(L,Y),d(L,H),d(H,X),d(L,f),C&&C.m(L,null),d(r,c),d(r,k),d(k,O);for(let W=0;W<5;W+=1)F[W]&&F[W].m(k,null);d(r,T),V.m(r,null),M=!0,j||(Q=we(n,"click",t[8]),j=!0)},p(v,[D]){if(v[3]?U?(U.p(v,D),D&8&&re(U,1)):(U=Di(v),U.c(),re(U,1),U.m(n,null)):U&&(Ot(),he(U,1,1,()=>{U=null}),zt()),(!M||D&1)&&a!==(a=v[9](v[0].url)+"")&&(o.innerHTML=a),(!M||D&1&&l!==(l=v[0].url))&&b(s,"title",l),(!M||D&3)&&g!==(g=(v[0].name?v[0].name.replaceAll(v[1],`<mark>${v[1]}</mark>`):"")+"")&&(u.innerHTML=g),(!M||D&2&&m!==(m=fi(v[1]==""?"hideOnSmall":"")+" svelte-afrxqy"))&&b(u,"class",m),(!M||D&130)&&E!==(E=v[7].replaceAll(v[1],`<mark>${v[1]}</mark>`)+"")&&(_.innerHTML=E),v[0].source?w?w.p(v,D):(w=Ni(v),w.c(),w.m(r,z)):w&&(w.d(1),w=null),(!M||D&1&&J!==(J="Open in Validator: "+v[0].url))&&b(H,"title",J),(!M||D&1&&S!==(S="https://ome.github.io/ome-ngff-validator/?source="+v[0].url))&&b(H,"href",S),v[0].origin?C?C.p(v,D):(C=Bi(v),C.c(),C.m(L,null)):C&&(C.d(1),C=null),D&1){R=Ne(["t","c","z","y","x"]);let W;for(W=0;W<5;W+=1){const ne=Fi(v,R,W);F[W]?F[W].p(ne,D):(F[W]=ji(ne),F[W].c(),F[W].m(k,null))}for(;W<5;W+=1)F[W].d(1)}A===(A=te(v))&&V?V.p(v,D):(V.d(1),V=A(v),V&&(V.c(),V.m(r,null)))},i(v){M||(re(U),M=!0)},o(v){he(U),M=!1},d(v){v&&q(e),U&&U.d(),w&&w.d(),C&&C.d(),It(F,v),V.d(),j=!1,Q()}}}function qi(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function Io(t,e,n){let i,{rowData:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e,a,l,h,u=1;const g=new AbortController;if(r.size_x&&r.size_y){let _=Math.max(r.size_x,r.size_y);for(h=0;_>256;)h+=1,_=_/2;u=r.size_x/r.size_y}function m(){console.log("Clicked on thumbnail"),Ae.setSelectedRow(r)}function p(_){if(s&&_.toLowerCase().includes(s.toLowerCase())){let N=_.toLowerCase(),z=s.toLowerCase(),L=N.indexOf(z),Y=Math.max(0,Math.min(L,_.length-50)),H=_.substring(Y,L);return H+="<mark>",H+=_.substring(L,L+z.length),H+="</mark>",H+=_.substring(L+z.length),H}return _.split("/").pop()}return $t(async()=>{let _=r.url;r.series0!==void 0&&(_+="/"+r.series0);let E=await jt(_,g.signal);n(3,a=E[0]),n(4,l=E[1]),E[2]}),xn(()=>{g.abort()}),t.$$set=_=>{"rowData"in _&&n(0,r=_.rowData),"textFilter"in _&&n(1,s=_.textFilter),"sortedBy"in _&&n(2,o=_.sortedBy)},t.$$.update=()=>{var _;t.$$.dirty&3&&n(7,i=s!=""&&((_=r.description)!=null&&_.toLowerCase().includes(s.toLowerCase()))?r.description:"")},[r,s,o,a,l,h,u,i,m,p]}class Co extends Ze{constructor(e){super(),Je(this,e,Io,Eo,Ue,{rowData:0,textFilter:1,sortedBy:2})}}function Ao(t){let e,n,i,r;return n=new Co({props:{rowData:t[0][t[13]],textFilter:t[1],sortedBy:t[2]}}),{c(){e=y("div"),Ke(n.$$.fragment),b(e,"slot","item"),b(e,"style",i=t[12]),b(e,"class","row svelte-1xlep2t")},m(s,o){x(s,e,o),Ve(n,e,null),r=!0},p(s,o){const a={};o&8193&&(a.rowData=s[0][s[13]]),o&2&&(a.textFilter=s[1]),o&4&&(a.sortedBy=s[2]),n.$set(a),(!r||o&4096&&i!==(i=s[12]))&&b(e,"style",i)},i(s){r||(re(n.$$.fragment,s),r=!0)},o(s){he(n.$$.fragment,s),r=!1},d(s){s&&q(e),We(n)}}}function So(t){let e=!1,n=()=>{e=!1},i,r,s,o=`${t[5]}px`,a,l,h;return st(t[8]),st(t[9]),s=new vs({props:{width:"100%",height:t[5],itemCount:t[0].length,itemSize:160,getKey:t[6],$$slots:{item:[Ao,({style:u,index:g})=>({12:u,13:g}),({style:u,index:g})=>(u?4096:0)|(g?8192:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[7]),{c(){r=y("div"),Ke(s.$$.fragment),b(r,"class","imageListContainer svelte-1xlep2t"),ae(r,"height",o)},m(u,g){x(u,r,g),Ve(s,r,null),t[10](r),a=!0,l||(h=[we(window,"resize",t[8]),we(window,"scroll",()=>{e=!0,clearTimeout(i),i=setTimeout(n,100),t[9]()})],l=!0)},p(u,[g]){g&16&&!e&&(e=!0,clearTimeout(i),scrollTo(window.pageXOffset,u[4]),i=setTimeout(n,100));const m={};g&32&&(m.height=u[5]),g&1&&(m.itemCount=u[0].length),g&28679&&(m.$$scope={dirty:g,ctx:u}),s.$set(m),g&32&&o!==(o=`${u[5]}px`)&&ae(r,"height",o)},i(u){a||(re(s.$$.fragment,u),a=!0)},o(u){he(s.$$.fragment,u),a=!1},d(u){u&&q(r),We(s),t[10](null),l=!1,et(h)}}}function To(t,e,n){let i,{tableRows:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e;function a(E){return r[E].url}let l,h=0,u=0;function g(E){let z=l.offsetTop-20;E.detail.offset-u<0&&h>z&&n(4,h-=1),u=E.detail.offset}function m(){n(5,i=window.innerHeight)}function p(){n(4,h=window.pageYOffset)}function _(E){Tt[E?"unshift":"push"](()=>{l=E,n(3,l)})}return t.$$set=E=>{"tableRows"in E&&n(0,r=E.tableRows),"textFilter"in E&&n(1,s=E.textFilter),"sortedBy"in E&&n(2,o=E.sortedBy)},n(5,i=0),[r,s,o,l,h,i,a,g,m,p,_]}class Oo extends Ze{constructor(e){super(),Je(this,e,To,So,Ue,{tableRows:0,textFilter:1,sortedBy:2})}}function xi(t){let e,n;return e=new Cr({props:{source:t[1],attrs:t[0],cssSize:512,max_size:2e3,thumbDatasetIndex:t[2],thumbAspectRatio:t[3]}}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.source=i[1]),r&1&&(s.attrs=i[0]),r&4&&(s.thumbDatasetIndex=i[2]),r&8&&(s.thumbAspectRatio=i[3]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function zo(t){let e,n,i=t[0]&&xi(t);return{c(){i&&i.c(),e=bn()},m(r,s){i&&i.m(r,s),x(r,e,s),n=!0},p(r,[s]){r[0]?i?(i.p(r,s),s&1&&re(i,1)):(i=xi(r),i.c(),re(i,1),i.m(e.parentNode,e)):i&&(Ot(),he(i,1,1,()=>{i=null}),zt())},i(r){n||(re(i),n=!0)},o(r){he(i),n=!1},d(r){r&&q(e),i&&i.d(r)}}}function Ro(t,e,n){let{rowData:i}=e;console.log("ThumbLoader",i);let r,s,o,a=1;if(i.size_x&&i.size_y){let l=Math.max(i.size_x,i.size_y);for(o=0;l>1024;)o+=1,l=l/2;a=i.size_x/i.size_y}else o=void 0,a=1;return $t(async()=>{let l=await jt(i.url);n(0,r=l[0]),n(1,s=l[1]),l[2]}),t.$$set=l=>{"rowData"in l&&n(4,i=l.rowData)},[r,s,o,a,i]}class Mo extends Ze{constructor(e){super(),Je(this,e,Ro,zo,Ue,{rowData:4})}}function Gi(t,e,n){const i=t.slice();return i[5]=e[n][0],i[6]=e[n][1],i}function Vi(t){let e,n;return e=new Mo({props:{rowData:t[1]}}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.rowData=i[1]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function Wi(t){let e,n,i=t[2]&&Vi(t);return{c(){i&&i.c(),e=bn()},m(r,s){i&&i.m(r,s),x(r,e,s),n=!0},p(r,s){r[2]?i?(i.p(r,s),s&4&&re(i,1)):(i=Vi(r),i.c(),re(i,1),i.m(e.parentNode,e)):i&&(Ot(),he(i,1,1,()=>{i=null}),zt())},i(r){n||(re(i),n=!0)},o(r){he(i),n=!1},d(r){r&&q(e),i&&i.d(r)}}}function Hi(t){let e,n=Ne(Object.entries(t[1])),i=[];for(let r=0;r<n.length;r+=1)i[r]=Ki(Gi(t,n,r));return{c(){e=y("table");for(let r=0;r<i.length;r+=1)i[r].c()},m(r,s){x(r,e,s);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(r,s){if(s&2){n=Ne(Object.entries(r[1]));let o;for(o=0;o<n.length;o+=1){const a=Gi(r,n,o);i[o]?i[o].p(a,s):(i[o]=Ki(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(r){r&&q(e),It(i,r)}}}function Ki(t){let e,n,i=t[5]+"",r,s,o=t[6]+"",a;return{c(){e=y("tr"),n=y("td"),r=B(i),s=y("td"),a=B(o)},m(l,h){x(l,e,h),d(e,n),d(n,r),d(e,s),d(s,a)},p(l,h){h&2&&i!==(i=l[5]+"")&&me(r,i),h&2&&o!==(o=l[6]+"")&&me(a,o)},d(l){l&&q(e)}}}function Lo(t){let e,n,i,r,s=t[2],o,a,l,h,u=Wi(t),g=t[1]&&Hi(t);return{c(){e=y("div"),n=y("button"),n.textContent="×",i=G(),r=y("div"),u.c(),o=G(),g&&g.c(),b(n,"class","close svelte-1g3sjso"),b(n,"title","Close"),b(r,"class","scrollable svelte-1g3sjso"),b(e,"id","mypopover"),b(e,"popover",""),b(e,"class","svelte-1g3sjso")},m(m,p){x(m,e,p),d(e,n),d(e,i),d(e,r),u.m(r,null),d(r,o),g&&g.m(r,null),t[4](e),a=!0,l||(h=we(n,"click",t[3]),l=!0)},p(m,[p]){p&4&&Ue(s,s=m[2])?(Ot(),he(u,1,1,ke),zt(),u=Wi(m),u.c(),re(u,1),u.m(r,o)):u.p(m,p),m[1]?g?g.p(m,p):(g=Hi(m),g.c(),g.m(r,null)):g&&(g.d(1),g=null)},i(m){a||(re(u),a=!0)},o(m){he(u),a=!1},d(m){m&&q(e),u.d(m),g&&g.d(),t[4](null),l=!1,h()}}}function Fo(t,e,n){let i,r,s;Ae.subscribeSelectedRow(l=>{console.log("Showing preview for",l),l&&(n(1,r=l),console.log("Showing Thumb preview for",l,r),n(2,s=r.url),i.showPopover())});function o(){i.hidePopover()}$t(()=>{console.log("Mounted popover",i),i&&i.addEventListener("toggle",l=>{l.newState==="open"||(console.log("Popover has been hidden"),Ae.setSelectedRow(null))})});function a(l){Tt[l?"unshift":"push"](()=>{i=l,n(0,i)})}return[i,r,s,o,a]}class Do extends Ze{constructor(e){super(),Je(this,e,Fo,Lo,Ue,{})}}const No="https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/selectCaret.svg",Po="https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/ome-main-nav.svg",Bo="https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/github-mark-white.svg";function Uo(t){let e,n,i,r,s,o,a,l,h,u,g,m,p,_,E;return{c(){e=y("base"),n=G(),i=y("nav"),r=y("a"),s=y("img"),a=G(),l=y("a"),h=y("h2"),h.textContent="2024 NGFF Challenge",u=G(),g=y("div"),m=G(),p=y("a"),p.textContent="About",_=G(),E=y("a"),E.innerHTML=`<img alt="GitHub Logo" src="${Bo}" class="svelte-1q2q39w"/>`,b(e,"href",t[0]),b(s,"alt","OME Logo"),Sn(s.src,o=Po)||b(s,"src",o),b(s,"class","svelte-1q2q39w"),b(r,"class","logolink svelte-1q2q39w"),b(r,"href",t[0]),b(h,"class","svelte-1q2q39w"),b(l,"href",t[0]),b(l,"class","svelte-1q2q39w"),ae(g,"flex","1"),b(p,"href","about/"),b(p,"class","svelte-1q2q39w"),b(E,"class","github svelte-1q2q39w"),b(E,"title","Open in GitHub"),b(E,"target","_blank"),b(E,"href","https://github.com/ome/ome2024-ngff-challenge/"),b(i,"class","svelte-1q2q39w")},m(N,z){x(N,e,z),x(N,n,z),x(N,i,z),d(i,r),d(r,s),d(i,a),d(i,l),d(l,h),d(i,u),d(i,g),d(i,m),d(i,p),d(i,_),d(i,E)},p:ke,i:ke,o:ke,d(N){N&&(q(e),q(n),q(i))}}}function jo(t){let e="https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/";return console.log("Nav base",e),[e]}class qo extends Ze{constructor(e){super(),Je(this,e,jo,Uo,Ue,{})}}function Ji(t){let e=t[0].plate_count+"",n,i;return{c(){n=B(e),i=B(" plates")},m(r,s){x(r,n,s),x(r,i,s)},p(r,s){s&1&&e!==(e=r[0].plate_count+"")&&me(n,e)},d(r){r&&(q(n),q(i))}}}function xo(t){let e,n,i,r,s,o,a,l=t[0].source+"",h,u,g,m,p,_,E=ut(t[0].bytes)+"",N,z,L,Y,H,X,J,S,f=t[0].image_count+"",c,k,O,T,M,j,Q,U,w,C=t[0].plate_count&&Ji(t);return{c(){e=y("div"),n=y("label"),i=y("img"),o=G(),a=y("div"),h=B(l),u=G(),g=y("br"),m=G(),p=y("span"),_=B("("),N=B(E),z=B(")"),Y=y("input"),X=G(),J=y("div"),C&&C.c(),S=G(),c=B(f),k=B(" images"),O=G(),T=y("label"),M=y("input"),j=G(),Q=y("span"),Q.textContent="×",b(i,"title",r=t[0].url),b(i,"class","sourceLogo svelte-1iuq3t7"),b(i,"alt","Source logo"),Sn(i.src,s=di(t[0].source))||b(i,"src",s),b(p,"title",L=t[0].child_csv.length+" collections"),b(Y,"class","source svelte-1iuq3t7"),b(Y,"type","radio"),b(Y,"name","source"),Y.value=H=t[0].source,b(J,"class","tooltip svelte-1iuq3t7"),b(n,"class","svelte-1iuq3t7"),b(M,"type","radio"),b(M,"name","source"),M.value="",b(M,"class","svelte-1iuq3t7"),b(Q,"title","Clear filter"),b(T,"class","clear svelte-1iuq3t7"),b(e,"class","source svelte-1iuq3t7")},m(R,F){x(R,e,F),d(e,n),d(n,i),d(n,o),d(n,a),d(a,h),d(a,u),d(a,g),d(a,m),d(a,p),d(p,_),d(p,N),d(p,z),d(a,Y),d(a,X),d(a,J),C&&C.m(J,null),d(J,S),d(J,c),d(J,k),d(e,O),d(e,T),d(T,M),d(T,j),d(T,Q),U||(w=[we(Y,"change",function(){_n(t[1])&&t[1].apply(this,arguments)}),we(M,"change",function(){_n(t[1])&&t[1].apply(this,arguments)})],U=!0)},p(R,[F]){t=R,F&1&&r!==(r=t[0].url)&&b(i,"title",r),F&1&&!Sn(i.src,s=di(t[0].source))&&b(i,"src",s),F&1&&l!==(l=t[0].source+"")&&me(h,l),F&1&&E!==(E=ut(t[0].bytes)+"")&&me(N,E),F&1&&L!==(L=t[0].child_csv.length+" collections")&&b(p,"title",L),F&1&&H!==(H=t[0].source)&&(Y.value=H),t[0].plate_count?C?C.p(t,F):(C=Ji(t),C.c(),C.m(J,S)):C&&(C.d(1),C=null),F&1&&f!==(f=t[0].image_count+"")&&me(c,f)},i:ke,o:ke,d(R){R&&q(e),C&&C.d(),U=!1,et(w)}}}function Go(t,e,n){let{source:i}=e,{handleFilter:r}=e;return t.$$set=s=>{"source"in s&&n(0,i=s.source),"handleFilter"in s&&n(1,r=s.handleFilter)},[i,r]}class Vo extends Ze{constructor(e){super(),Je(this,e,Go,xo,Ue,{source:0,handleFilter:1})}}function Wo(t,e,n){const i=t.slice();return i[31]=e[n],i}function Zi(t,e,n){const i=t.slice();return i[34]=e[n],i}function Yi(t,e,n){const i=t.slice();return i[34]=e[n],i}function Qi(t,e,n){const i=t.slice();return i[39]=e[n],i}function Xi(t,e,n){const i=t.slice();return i[42]=e[n],i}function Ho(t){let e,n,i,r=t[1].split("/").pop()+"",s,o,a=t[1]!=gn&&$i(t);return{c(){e=y("div"),n=B(`Showing Collection:
            `),i=y("a"),s=B(r),o=G(),a&&a.c(),b(i,"href",t[1]),ae(e,"font-size","90%")},m(l,h){x(l,e,h),d(e,n),d(e,i),d(i,s),d(e,o),a&&a.m(e,null)},p(l,h){h[0]&2&&r!==(r=l[1].split("/").pop()+"")&&me(s,r),h[0]&2&&b(i,"href",l[1]),l[1]!=gn?a?a.p(l,h):(a=$i(l),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(l){l&&q(e),a&&a.d()}}}function Ko(t){let e,n=ut(t[4])+"",i,r;return{c(){e=y("strong"),i=B(n),r=B(`
          of public bioimage data in the next major version of OME-Zarr,
          including Zarr v3 and sharding, with distributed hosting.`),ae(e,"font-weight","600")},m(s,o){x(s,e,o),d(e,i),x(s,r,o)},p(s,o){o[0]&16&&n!==(n=ut(s[4])+"")&&me(i,n)},d(s){s&&(q(e),q(r))}}}function $i(t){let e,n=ut(t[4])+"",i,r,s,o,a,l;return{c(){e=B("("),i=B(n),r=B(`)
              `),s=y("span"),s.textContent="  |  ",o=G(),a=y("a"),l=B("Show all collections"),ae(s,"color","grey"),b(a,"href",window.location.origin+window.location.pathname)},m(h,u){x(h,e,u),x(h,i,u),x(h,r,u),x(h,s,u),x(h,o,u),x(h,a,u),d(a,l)},p(h,u){u[0]&16&&n!==(n=ut(h[4])+"")&&me(i,n)},d(h){h&&(q(e),q(i),q(r),q(s),q(o),q(a))}}}function er(t){let e,n;return e=new Vo({props:{source:t[42],handleFilter:t[17]}}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[0]&4&&(s.source=i[42]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function tr(t){let e,n,i,r,s,o,a,l,h,u=Ne(Ae.getCsvSourceList(t[14])),g=[];for(let m=0;m<u.length;m+=1)g[m]=nr(Qi(t,u,m));return{c(){e=y("div"),n=y("select"),i=y("option"),i.textContent="Collection";for(let m=0;m<g.length;m+=1)g[m].c();r=G(),s=y("div"),o=y("button"),a=B("×"),i.__value="",Ie(i,i.__value),b(n,"name","collection"),b(n,"class","svelte-10h51w5"),t[12]===void 0&&st(()=>t[24].call(n)),b(o,"title","Clear Filter"),ae(o,"visibility",t[12]!==""?"visible":"hidden"),b(o,"class","svelte-10h51w5"),b(s,"class","svelte-10h51w5"),b(e,"class","selectWrapper svelte-10h51w5")},m(m,p){x(m,e,p),d(e,n),d(n,i);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(n,null);ot(n,t[12],!0),d(e,r),d(e,s),d(s,o),d(o,a),l||(h=[we(n,"change",t[24]),we(n,"change",t[19]),we(o,"click",t[19])],l=!0)},p(m,p){if(p[0]&16384){u=Ne(Ae.getCsvSourceList(m[14]));let _;for(_=0;_<u.length;_+=1){const E=Qi(m,u,_);g[_]?g[_].p(E,p):(g[_]=nr(E),g[_].c(),g[_].m(n,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=u.length}p[0]&20480&&ot(n,m[12]),p[0]&4096&&ae(o,"visibility",m[12]!==""?"visible":"hidden")},d(m){m&&q(e),It(g,m),l=!1,et(h)}}}function nr(t){let e,n=(t[39].source==t[14]?sr(t[39].url):t[39].source)+"",i,r,s=t[39].image_count+"",o,a,l;return{c(){e=y("option"),i=B(n),r=B(" ("),o=B(s),a=B(`)
                  `),e.__value=l=t[39].url,Ie(e,e.__value)},m(h,u){x(h,e,u),d(e,i),d(e,r),d(e,o),d(e,a)},p(h,u){u[0]&16384&&n!==(n=(h[39].source==h[14]?sr(h[39].url):h[39].source)+"")&&me(i,n),u[0]&16384&&s!==(s=h[39].image_count+"")&&me(o,s),u[0]&16384&&l!==(l=h[39].url)&&(e.__value=l,Ie(e,e.__value))},d(h){h&&q(e)}}}function ir(t){let e,n=t[34]+"",i,r;return{c(){e=y("option"),i=B(n),e.__value=r=t[5][t[34]],Ie(e,e.__value)},m(s,o){x(s,e,o),d(e,i)},p(s,o){o[0]&32&&n!==(n=s[34]+"")&&me(i,n),o[0]&32&&r!==(r=s[5][s[34]])&&(e.__value=r,Ie(e,e.__value))},d(s){s&&q(e)}}}function rr(t,e){let n,i=e[34]+"",r,s;return{key:t,first:null,c(){n=y("option"),r=B(i),n.__value=s=e[6][e[34]],Ie(n,n.__value),this.first=n},m(o,a){x(o,n,a),d(n,r)},p(o,a){e=o,a[0]&64&&i!==(i=e[34]+"")&&me(r,i),a[0]&64&&s!==(s=e[6][e[34]])&&(n.__value=s,Ie(n,n.__value))},d(o){o&&q(n)}}}function Jo(t){let e;return{c(){e=y("option"),e.textContent=`Size: ${t[31].toUpperCase()}`,e.__value="size_"+t[31],Ie(e,e.__value)},m(n,i){x(n,e,i)},p:ke,d(n){n&&q(e)}}}function Zo(t){let e,n,i,r,s,o,a,l,h,u,g,m,p,_,E,N,z,L,Y,H=t[14]!==""&&Ae.getCsvSourceList(t[14]).length>0,X,J,S,f,c=t[13]!==""?"All Dimensions":"Dimension Count",k,O,T,M,j,Q,U,w,C,R,F,te,A,V,v=t[11]==""?"Organism":"All Organisms",D,W,ne,ie,P,Z,ue,de,$,pe,_e=t[10]==""?"Imaging Modality":"All Modalities",ce,Pe,be=[],je=new Map,He,Oe,se,ve,Ye,le,tt,qe,Qe,Re,Ce,Me,Le,ct,Se,nt,Xe,ei,nn,ft,ti,bt,it,ni,rn=t[0].length+"",wn,ii,yn,ri,si,ht,xe,kn,oi;e=new Do({});function li(I,K){return I[1]==gn?Ko:Ho}let sn=li(t),$e=sn(t),dt=Ne(t[2]),ye=[];for(let I=0;I<dt.length;I+=1)ye[I]=er(Xi(t,dt,I));const Ar=I=>he(ye[I],1,1,()=>{ye[I]=null});let Be=H&&tr(t),vt=Ne(Object.keys(t[5]).sort()),Fe=[];for(let I=0;I<vt.length;I+=1)Fe[I]=ir(Yi(t,vt,I));let on=Ne(Object.keys(t[6]).sort());const ai=I=>I[34];for(let I=0;I<on.length;I+=1){let K=Zi(t,on,I),ge=ai(K);je.set(ge,be[I]=rr(ge,K))}let Sr=Ne(["x","y","z","c","t"]),Mt=[];for(let I=0;I<5;I+=1)Mt[I]=Jo(Wo(t,Sr,I));return ft=new cs({props:{toggleAscending:t[15],sortAscending:t[8]}}),ht=new Oo({props:{tableRows:t[0],textFilter:t[9],sortedBy:t[7]}}),{c(){Ke(e.$$.fragment),n=G(),i=y("main"),r=y("div"),s=y("h3"),$e.c(),o=G(),a=y("div"),l=y("input"),h=G(),u=y("button"),g=B("×"),m=G(),p=y("div");for(let I=0;I<ye.length;I+=1)ye[I].c();_=G(),E=y("div"),N=y("div"),z=y("div"),L=y("div"),L.textContent="Filter by:",Y=G(),Be&&Be.c(),X=G(),J=y("div"),S=y("select"),f=y("option"),k=B(c),O=y("hr"),T=y("option"),T.textContent="2D",M=y("option"),M.textContent="3D",j=y("option"),j.textContent="4D",Q=y("option"),Q.textContent="5D",U=G(),w=y("div"),C=y("button"),R=B("×"),F=G(),te=y("div"),A=y("select"),V=y("option"),D=B(v),W=y("hr");for(let I=0;I<Fe.length;I+=1)Fe[I].c();ne=G(),ie=y("div"),P=y("button"),Z=B("×"),ue=G(),de=y("div"),$=y("select"),pe=y("option"),ce=B(_e),Pe=y("hr");for(let I=0;I<be.length;I+=1)be[I].c();He=G(),Oe=y("div"),se=y("button"),ve=B("×"),Ye=G(),le=y("div"),tt=G(),qe=y("div"),qe.textContent="Sort by:",Qe=G(),Re=y("div"),Ce=y("select"),Me=y("option"),Me.textContent="--",Le=y("hr");for(let I=0;I<5;I+=1)Mt[I].c();ct=y("hr"),Se=y("option"),Se.textContent="Data Size (bytes)",nt=y("option"),nt.textContent="Chunk Size (pixels)",Xe=y("option"),Xe.textContent="Shard Size (pixels)",ei=G(),nn=y("div"),Ke(ft.$$.fragment),ti=G(),bt=y("div"),it=y("h3"),ni=B("Showing "),wn=B(rn),ii=B(" out of "),yn=B(t[3]),ri=B(" images"),si=G(),Ke(ht.$$.fragment),ae(s,"text-align","center"),b(l,"placeholder","Filter by Name or Description"),b(l,"name","textFilter"),b(l,"class","svelte-10h51w5"),b(u,"title","Clear Filter"),ae(u,"visibility",t[9]!==""?"visible":"hidden"),b(u,"class","svelte-10h51w5"),b(a,"class","textInputWrapper svelte-10h51w5"),b(p,"class","sources svelte-10h51w5"),b(r,"class","summary svelte-10h51w5"),ae(L,"white-space","nowrap"),f.__value="",Ie(f,f.__value),T.__value="2",Ie(T,T.__value),M.__value="3",Ie(M,M.__value),j.__value="4",Ie(j,j.__value),Q.__value="5",Ie(Q,Q.__value),b(S,"class","svelte-10h51w5"),t[13]===void 0&&st(()=>t[25].call(S)),b(C,"title","Clear Filter"),ae(C,"visibility",t[13]!==""?"visible":"hidden"),b(C,"class","svelte-10h51w5"),b(w,"class","svelte-10h51w5"),b(J,"class","selectWrapper svelte-10h51w5"),V.__value="",Ie(V,V.__value),b(A,"class","svelte-10h51w5"),t[11]===void 0&&st(()=>t[26].call(A)),b(P,"title","Clear Filter"),ae(P,"visibility",t[11]!==""?"visible":"hidden"),b(P,"class","svelte-10h51w5"),b(ie,"class","svelte-10h51w5"),b(te,"class","selectWrapper svelte-10h51w5"),pe.__value="",Ie(pe,pe.__value),b($,"class","svelte-10h51w5"),t[10]===void 0&&st(()=>t[27].call($)),b(se,"title","Clear Filter"),ae(se,"visibility",t[10]!==""?"visible":"hidden"),b(se,"class","svelte-10h51w5"),b(Oe,"class","svelte-10h51w5"),b(de,"class","selectWrapper svelte-10h51w5"),b(le,"class","clear"),Me.__value="",Ie(Me,Me.__value),Se.__value="written",Ie(Se,Se.__value),nt.__value="chunk_pixels",Ie(nt,nt.__value),Xe.__value="shard_pixels",Ie(Xe,Xe.__value),b(Ce,"class","svelte-10h51w5"),b(nn,"class","svelte-10h51w5"),b(Re,"class","selectWrapper svelte-10h51w5"),b(z,"class","filters svelte-10h51w5"),b(N,"class","sidebar svelte-10h51w5"),ae(it,"margin-left","15px"),b(it,"class","svelte-10h51w5"),b(bt,"class","results svelte-10h51w5"),b(E,"class","sidebarContainer svelte-10h51w5"),ae(i,"--form-select-bg-img","url('"+No+"')"),b(i,"class","svelte-10h51w5")},m(I,K){Ve(e,I,K),x(I,n,K),x(I,i,K),d(i,r),d(r,s),$e.m(s,null),d(r,o),d(r,a),d(a,l),Ie(l,t[9]),d(a,h),d(a,u),d(u,g),d(r,m),d(r,p);for(let ge=0;ge<ye.length;ge+=1)ye[ge]&&ye[ge].m(p,null);d(i,_),d(i,E),d(E,N),d(N,z),d(z,L),d(z,Y),Be&&Be.m(z,null),d(z,X),d(z,J),d(J,S),d(S,f),d(f,k),d(S,O),d(S,T),d(S,M),d(S,j),d(S,Q),ot(S,t[13],!0),d(J,U),d(J,w),d(w,C),d(C,R),d(z,F),d(z,te),d(te,A),d(A,V),d(V,D),d(A,W);for(let ge=0;ge<Fe.length;ge+=1)Fe[ge]&&Fe[ge].m(A,null);ot(A,t[11],!0),d(te,ne),d(te,ie),d(ie,P),d(P,Z),d(z,ue),d(z,de),d(de,$),d($,pe),d(pe,ce),d($,Pe);for(let ge=0;ge<be.length;ge+=1)be[ge]&&be[ge].m($,null);ot($,t[10],!0),d(de,He),d(de,Oe),d(Oe,se),d(se,ve),d(z,Ye),d(z,le),d(z,tt),d(z,qe),d(z,Qe),d(z,Re),d(Re,Ce),d(Ce,Me),d(Ce,Le);for(let ge=0;ge<5;ge+=1)Mt[ge]&&Mt[ge].m(Ce,null);d(Ce,ct),d(Ce,Se),d(Ce,nt),d(Ce,Xe),d(Re,ei),d(Re,nn),Ve(ft,nn,null),d(E,ti),d(E,bt),d(bt,it),d(it,ni),d(it,wn),d(it,ii),d(it,yn),d(it,ri),d(bt,si),Ve(ht,bt,null),xe=!0,kn||(oi=[we(l,"input",t[23]),we(l,"input",t[22]),we(u,"click",t[22]),we(S,"change",t[25]),we(S,"change",t[18]),we(C,"click",t[18]),we(A,"change",t[26]),we(A,"change",t[20]),we(P,"click",t[20]),we($,"change",t[27]),we($,"change",t[21]),we(se,"click",t[21]),we(Ce,"change",t[16])],kn=!0)},p(I,K){if(sn===(sn=li(I))&&$e?$e.p(I,K):($e.d(1),$e=sn(I),$e&&($e.c(),$e.m(s,null))),K[0]&512&&l.value!==I[9]&&Ie(l,I[9]),(!xe||K[0]&512)&&ae(u,"visibility",I[9]!==""?"visible":"hidden"),K[0]&131076){dt=Ne(I[2]);let fe;for(fe=0;fe<dt.length;fe+=1){const Lt=Xi(I,dt,fe);ye[fe]?(ye[fe].p(Lt,K),re(ye[fe],1)):(ye[fe]=er(Lt),ye[fe].c(),re(ye[fe],1),ye[fe].m(p,null))}for(Ot(),fe=dt.length;fe<ye.length;fe+=1)Ar(fe);zt()}if(K[0]&16384&&(H=I[14]!==""&&Ae.getCsvSourceList(I[14]).length>0),H?Be?Be.p(I,K):(Be=tr(I),Be.c(),Be.m(z,X)):Be&&(Be.d(1),Be=null),(!xe||K[0]&8192)&&c!==(c=I[13]!==""?"All Dimensions":"Dimension Count")&&me(k,c),K[0]&8192&&ot(S,I[13]),(!xe||K[0]&8192)&&ae(C,"visibility",I[13]!==""?"visible":"hidden"),(!xe||K[0]&2048)&&v!==(v=I[11]==""?"Organism":"All Organisms")&&me(D,v),K[0]&32){vt=Ne(Object.keys(I[5]).sort());let fe;for(fe=0;fe<vt.length;fe+=1){const Lt=Yi(I,vt,fe);Fe[fe]?Fe[fe].p(Lt,K):(Fe[fe]=ir(Lt),Fe[fe].c(),Fe[fe].m(A,null))}for(;fe<Fe.length;fe+=1)Fe[fe].d(1);Fe.length=vt.length}K[0]&2080&&ot(A,I[11]),(!xe||K[0]&2048)&&ae(P,"visibility",I[11]!==""?"visible":"hidden"),(!xe||K[0]&1024)&&_e!==(_e=I[10]==""?"Imaging Modality":"All Modalities")&&me(ce,_e),K[0]&64&&(on=Ne(Object.keys(I[6]).sort()),be=fr(be,K,ai,1,I,on,je,$,jr,rr,null,Zi)),K[0]&1088&&ot($,I[10]),(!xe||K[0]&1024)&&ae(se,"visibility",I[10]!==""?"visible":"hidden");const ge={};K[0]&256&&(ge.sortAscending=I[8]),ft.$set(ge),(!xe||K[0]&1)&&rn!==(rn=I[0].length+"")&&me(wn,rn),(!xe||K[0]&8)&&me(yn,I[3]);const ln={};K[0]&1&&(ln.tableRows=I[0]),K[0]&512&&(ln.textFilter=I[9]),K[0]&128&&(ln.sortedBy=I[7]),ht.$set(ln)},i(I){if(!xe){re(e.$$.fragment,I);for(let K=0;K<dt.length;K+=1)re(ye[K]);re(ft.$$.fragment,I),re(ht.$$.fragment,I),xe=!0}},o(I){he(e.$$.fragment,I),ye=ye.filter(Boolean);for(let K=0;K<ye.length;K+=1)he(ye[K]);he(ft.$$.fragment,I),he(ht.$$.fragment,I),xe=!1},d(I){I&&(q(n),q(i)),We(e,I),$e.d(),It(ye,I),Be&&Be.d(),It(Fe,I);for(let K=0;K<be.length;K+=1)be[K].d();It(Mt,I),We(ft),We(ht),kn=!1,et(oi)}}}function sr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function Yo(t,e,n){let i,r,s,o,a,l,u=new URLSearchParams(window.location.search).get("csv");try{new URL(u)}catch{u=gn}let g=[],m=[],p=0,_=0,E={},N={};Ae.subscribe(w=>{n(0,g=X(w)),n(2,m=Ae.getCsvSourceList()),n(3,p=w.length),n(4,_=w.reduce((C,R)=>C+parseInt(R.written)||0,0))}),br.subscribe(w=>{let C={};for(const[R,F]of Object.entries(w))C[F]=R;n(5,E=C)}),vr.subscribe(w=>{let C={};for(const[R,F]of Object.entries(w))C[F]=R;n(6,N=C)}),u&&dr(u,Ae);let z="",L=!1;function Y(){n(8,L=!L),Ae.sortTable(z,L)}function H(w){n(7,z=w.target.value),z===""?Ae.sortTable("index",!0):Ae.sortTable(z,L)}function X(w){if(i!==""&&(w=w.filter(C=>C.dim_count==i)),s!=="")w=w.filter(C=>C.csv==s);else if(r!==""){let C=Ae.getCsvSourceList(r),R=[r,...C.map(F=>F.source)];w=w.filter(F=>R.includes(F.source))}if(o!==""&&(w=w.filter(C=>C.organismId==o)),a!=""&&(w=w.filter(C=>C.fbbiId==a)),l&&l!=""){let C=l.toLowerCase();w=w.filter(R=>{var F,te;return R.url.toLowerCase().includes(C)||((F=R.description)==null?void 0:F.toLowerCase().includes(C))||((te=R.name)==null?void 0:te.toLowerCase().includes(C))})}return w}function J(w){n(14,r=w.target.value||""),n(12,s=""),console.log("filterSource",r,s),n(0,g=X(Ae.getRows()))}function S(w){n(13,i=w.target.value||""),n(0,g=X(Ae.getRows()))}function f(w){n(12,s=w.target.value||""),n(0,g=X(Ae.getRows()))}function c(w){n(11,o=w.target.value||""),n(0,g=X(Ae.getRows()))}function k(w){n(10,a=w.target.value||""),n(0,g=X(Ae.getRows()))}function O(w){n(9,l=w.target.value),n(0,g=X(Ae.getRows()))}function T(){l=this.value,n(9,l)}function M(){s=un(this),n(12,s),n(14,r)}function j(){i=un(this),n(13,i)}function Q(){o=un(this),n(11,o),n(5,E)}function U(){a=un(this),n(10,a),n(6,N)}return t.$$.update=()=>{t.$$.dirty[0]&1&&g.some(w=>w.source)},n(13,i=""),n(14,r=""),n(12,s=""),n(11,o=""),n(10,a=""),n(9,l=""),[g,u,m,p,_,E,N,z,L,l,a,o,s,i,r,Y,H,J,S,f,c,k,O,T,M,j,Q,U]}class Qo extends Ze{constructor(e){super(),Je(this,e,Yo,Zo,Ue,{},null,[-1,-1])}}const Xo="https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/nfdi_rgb_Wortmarke_Zusatz_quer.png",$o="https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/czi-logo-chan-zuckerberg-initiative-logo.png";function el(t){let e,n,i;return{c(){e=y("base"),n=G(),i=y("div"),i.innerHTML=`<h2>Introduction</h2> <p>The <a href="https://forum.image.sc/t/ome2024-ngff-challenge/97363">2024 OME-NGFF Challenge</a>
    was conceived at the
    <a href="https://www.openmicroscopy.org/events/ome-community-meeting-2024/">OME Annual Community Meeting</a>
    in Dundee in May 2024. The stated goals of Challenge were:</p> <ul><li>Advancing the status of OME-Zarr specification proposals —
      <a href="https://ngff.openmicroscopy.org/rfc/">Requests for Comment (RFC)</a> —
      especially the adoption of the Zarr V3 specification</li> <li>Collecting the URLs of converted examples of OME-Zarr from multiple modalities, use cases, and
      institutions, all hosted by each participant themselves</li> <li>Testing the level of maturity of OME-Zarr conversion tools, image viewers,
      and metadata in general</li></ul> <p>The inspiration for the Challenge came from presentations at the OME Meeting
    that demonstrated the level of adoption of OME-Zarr and the relative ease of
    conversion for some community members, but highlighted the often poor findability of the data
    and the need for driving the OME-Zarr specification towards version 1.0.
  </p><p>A lofty goal of 1 Petabyte (PB) of data was set, mostly to make clear the scale of what <em>could be</em>.</p> <p>Work on the challenge started in earnest in July 2024. All progress is
    tracked in the <a href="https://github.com/ome/ome2024-ngff-challenge">ome2024-ngff-challenge</a>
    repository. It was agreed that the deadline for submission would be such that the results
    of the OME-NGFF Challenge could be presented at the
    <a href="https://globalbioimaging.org/exchange-of-experience/exchange-of-experience-ix">2024 Global BioImaging Meeting</a>.</p> <h2>Process</h2> <p>The Challenge was run via a series of virtual meetings open to all which were coordinated on the
    Image.sc Forums, with all
    <a href="https://hackmd.io/3emKqKQsT_2U35vLepzDEQ">notes and lists of participants</a>
    available. Initial meetings including that at OME2024 focused on defining the scope of
    changes that would be made to the OME-Zarr format. A Python-based tool to convert data
    to this format was built. Submissions were then collected in simple CSV files with a Zarr
    URL per row.</p> <h2>Results</h2> <p>At the outset, it was unclear how much OME-Zarr data was available, if it
    could be converted to Zarr V3, and how many organisations would participate.
    In the end, we are pleased with the more than 500 Terabytes of data which
    have been made available, across a wide range of modalities.</p> <p>To make the collection as accessible as possible, the
  <a href="https://ome.github.io/ome2024-ngff-challenge">OME-NGFF Challenge Viewer</a>,
    parses submissions from contributors and provides a single view across
    all Zarr files. Data can be searched by key-word,
    filtered and sorted by various metadata and browsed with thumbnails,
    all generated on the fly. Links allow opening of datasets with the OME NGFF
    Validator for metadata validation and viewing.
    Please let us know on image.sc or GitHub if you have any issues
    or ideas.</p> <p>Looking back, perhaps the most rewarding outcome of the Challenge is that with a remarkably
    modest investment of time and cloud resources, we have almost inadvertently prototyped
    a federated bioimage data system based on OME-Zarr, the largest one we know of.
    We hope future challenges will continue to push the state-of-the-art forward.</p> <h2>Acknowledgements</h2> <p>Coordination of the challenge has been supported by the <a href="https://www.nfdi.de/">German National Research Data
    Initiative (NFDI)</a> and the <a href="https://chanzuckerberg.com/">Chan Zuckerberg Initiative</a>:</p> <table><tr><td><img src="${Xo}" width="45%"/></td> <td><img src="${$o}" width="45%"/></td></tr></table>`,b(e,"href",t[0]),b(i,"class","svelte-zlrnwt")},m(r,s){x(r,e,s),x(r,n,s),x(r,i,s)},p:ke,i:ke,o:ke,d(r){r&&(q(e),q(n),q(i))}}}function tl(t){return["https://NFDI4BIOIMAGE.github.io/ome2024-ngff-challenge/"]}class nl extends Ze{constructor(e){super(),Je(this,e,tl,el,Ue,{})}}function il(t){let e,n;return e=new Qo({}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function rl(t){let e,n;return e=new nl({}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function sl(t){let e,n,i,r,s,o;n=new qo({});const a=[rl,il],l=[];function h(u,g){return u[0].endsWith("/about/")?0:1}return r=h(t),s=l[r]=a[r](t),{c(){e=y("div"),Ke(n.$$.fragment),i=G(),s.c(),b(e,"class","app svelte-1mc4mod")},m(u,g){x(u,e,g),Ve(n,e,null),d(e,i),l[r].m(e,null),o=!0},p:ke,i(u){o||(re(n.$$.fragment,u),re(s),o=!0)},o(u){he(n.$$.fragment,u),he(s),o=!1},d(u){u&&q(e),We(n),l[r].d()}}}function ol(t){return[window.location.pathname]}class ll extends Ze{constructor(e){super(),Je(this,e,ol,sl,Ue,{})}}new ll({target:document.getElementById("app")});
